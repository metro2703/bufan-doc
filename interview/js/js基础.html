<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>JS 基础考点 | 不凡学院前端100天</title>
    <meta name="description" content="快速上手,循序渐进">
    <link rel="icon" href="/bufan-doc/logo.jpg">
  <link rel="manifest" href="/bufan-doc/manifest.json">
  <meta name="theme-color" content="#3eaf7c">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <link rel="apple-touch-icon" href="/bufan-doc/icons/apple-touch-icon-152x152.png">
  <link rel="mask-icon" href="/bufan-doc/icons/safari-pinned-tab.svg" color="#3eaf7c">
  <meta name="msapplication-TileImage" content="/icons/msapplication-icon-144x144.png">
  <meta name="msapplication-TileColor" content="#000000">
    
    <link rel="preload" href="/bufan-doc/assets/css/0.styles.4fc22246.css" as="style"><link rel="preload" href="/bufan-doc/assets/js/app.f4cc6427.js" as="script"><link rel="preload" href="/bufan-doc/assets/js/4.d60abc91.js" as="script"><link rel="preload" href="/bufan-doc/assets/js/3.08e48031.js" as="script"><link rel="preload" href="/bufan-doc/assets/js/38.45b62383.js" as="script"><link rel="preload" href="/bufan-doc/assets/js/14.618a24b7.js" as="script"><link rel="prefetch" href="/bufan-doc/assets/js/10.3b8a5562.js"><link rel="prefetch" href="/bufan-doc/assets/js/100.4ba68262.js"><link rel="prefetch" href="/bufan-doc/assets/js/101.6db92bf8.js"><link rel="prefetch" href="/bufan-doc/assets/js/102.01d55fe2.js"><link rel="prefetch" href="/bufan-doc/assets/js/103.4104b1e2.js"><link rel="prefetch" href="/bufan-doc/assets/js/104.af35539f.js"><link rel="prefetch" href="/bufan-doc/assets/js/105.64f144d2.js"><link rel="prefetch" href="/bufan-doc/assets/js/106.1ad49cc0.js"><link rel="prefetch" href="/bufan-doc/assets/js/107.b3243d38.js"><link rel="prefetch" href="/bufan-doc/assets/js/108.e4f06cdf.js"><link rel="prefetch" href="/bufan-doc/assets/js/109.f82c6f4f.js"><link rel="prefetch" href="/bufan-doc/assets/js/11.dabd9edf.js"><link rel="prefetch" href="/bufan-doc/assets/js/110.43ef8a19.js"><link rel="prefetch" href="/bufan-doc/assets/js/111.8d21dabd.js"><link rel="prefetch" href="/bufan-doc/assets/js/112.97d55372.js"><link rel="prefetch" href="/bufan-doc/assets/js/113.17be5afc.js"><link rel="prefetch" href="/bufan-doc/assets/js/114.7c7c0031.js"><link rel="prefetch" href="/bufan-doc/assets/js/115.6191c96c.js"><link rel="prefetch" href="/bufan-doc/assets/js/116.f8406fce.js"><link rel="prefetch" href="/bufan-doc/assets/js/117.7e6ced5f.js"><link rel="prefetch" href="/bufan-doc/assets/js/118.95f2b2c6.js"><link rel="prefetch" href="/bufan-doc/assets/js/119.656fb4a6.js"><link rel="prefetch" href="/bufan-doc/assets/js/12.28f15829.js"><link rel="prefetch" href="/bufan-doc/assets/js/120.884f6058.js"><link rel="prefetch" href="/bufan-doc/assets/js/121.1ea98fcd.js"><link rel="prefetch" href="/bufan-doc/assets/js/122.ff3c9d25.js"><link rel="prefetch" href="/bufan-doc/assets/js/123.2d0a0879.js"><link rel="prefetch" href="/bufan-doc/assets/js/124.dbee8ca1.js"><link rel="prefetch" href="/bufan-doc/assets/js/125.fe02abe6.js"><link rel="prefetch" href="/bufan-doc/assets/js/126.ea7f7bb5.js"><link rel="prefetch" href="/bufan-doc/assets/js/127.606c2de1.js"><link rel="prefetch" href="/bufan-doc/assets/js/128.0f2b467b.js"><link rel="prefetch" href="/bufan-doc/assets/js/129.97cbaeca.js"><link rel="prefetch" href="/bufan-doc/assets/js/13.83be0207.js"><link rel="prefetch" href="/bufan-doc/assets/js/15.671b0072.js"><link rel="prefetch" href="/bufan-doc/assets/js/16.6425c53e.js"><link rel="prefetch" href="/bufan-doc/assets/js/17.f748524f.js"><link rel="prefetch" href="/bufan-doc/assets/js/18.dae45be7.js"><link rel="prefetch" href="/bufan-doc/assets/js/19.a61fe4f0.js"><link rel="prefetch" href="/bufan-doc/assets/js/20.80399a10.js"><link rel="prefetch" href="/bufan-doc/assets/js/21.d424c18b.js"><link rel="prefetch" href="/bufan-doc/assets/js/22.5d82a21d.js"><link rel="prefetch" href="/bufan-doc/assets/js/23.36b6d0a0.js"><link rel="prefetch" href="/bufan-doc/assets/js/24.b2436ce4.js"><link rel="prefetch" href="/bufan-doc/assets/js/25.d0c6e25f.js"><link rel="prefetch" href="/bufan-doc/assets/js/26.b5e3c19c.js"><link rel="prefetch" href="/bufan-doc/assets/js/27.a524df1a.js"><link rel="prefetch" href="/bufan-doc/assets/js/28.25c0ed5e.js"><link rel="prefetch" href="/bufan-doc/assets/js/29.f9b5a855.js"><link rel="prefetch" href="/bufan-doc/assets/js/30.67d39ab6.js"><link rel="prefetch" href="/bufan-doc/assets/js/31.92b1b15d.js"><link rel="prefetch" href="/bufan-doc/assets/js/32.f4e82e10.js"><link rel="prefetch" href="/bufan-doc/assets/js/33.8e078611.js"><link rel="prefetch" href="/bufan-doc/assets/js/34.b4bea20d.js"><link rel="prefetch" href="/bufan-doc/assets/js/35.24d90a48.js"><link rel="prefetch" href="/bufan-doc/assets/js/36.ef702182.js"><link rel="prefetch" href="/bufan-doc/assets/js/37.f5cc6f4f.js"><link rel="prefetch" href="/bufan-doc/assets/js/39.5351a017.js"><link rel="prefetch" href="/bufan-doc/assets/js/40.39da4318.js"><link rel="prefetch" href="/bufan-doc/assets/js/41.bc5678de.js"><link rel="prefetch" href="/bufan-doc/assets/js/42.f4a5cc7c.js"><link rel="prefetch" href="/bufan-doc/assets/js/43.83e2ec23.js"><link rel="prefetch" href="/bufan-doc/assets/js/44.4675ab38.js"><link rel="prefetch" href="/bufan-doc/assets/js/45.72d3f200.js"><link rel="prefetch" href="/bufan-doc/assets/js/46.8d77ad14.js"><link rel="prefetch" href="/bufan-doc/assets/js/47.7daeae21.js"><link rel="prefetch" href="/bufan-doc/assets/js/48.8c3532fd.js"><link rel="prefetch" href="/bufan-doc/assets/js/49.d2ceb345.js"><link rel="prefetch" href="/bufan-doc/assets/js/5.38bfdf08.js"><link rel="prefetch" href="/bufan-doc/assets/js/50.41300c4a.js"><link rel="prefetch" href="/bufan-doc/assets/js/51.7123e828.js"><link rel="prefetch" href="/bufan-doc/assets/js/52.96ab2ac5.js"><link rel="prefetch" href="/bufan-doc/assets/js/53.01bcfe44.js"><link rel="prefetch" href="/bufan-doc/assets/js/54.379a6e11.js"><link rel="prefetch" href="/bufan-doc/assets/js/55.05379669.js"><link rel="prefetch" href="/bufan-doc/assets/js/56.380aaeac.js"><link rel="prefetch" href="/bufan-doc/assets/js/57.5638cfe7.js"><link rel="prefetch" href="/bufan-doc/assets/js/58.4aaf9b06.js"><link rel="prefetch" href="/bufan-doc/assets/js/59.6db0022e.js"><link rel="prefetch" href="/bufan-doc/assets/js/6.2c430a05.js"><link rel="prefetch" href="/bufan-doc/assets/js/60.5b1ba8d4.js"><link rel="prefetch" href="/bufan-doc/assets/js/61.f226504c.js"><link rel="prefetch" href="/bufan-doc/assets/js/62.2563abf3.js"><link rel="prefetch" href="/bufan-doc/assets/js/63.94b44c4a.js"><link rel="prefetch" href="/bufan-doc/assets/js/64.2b0b61cf.js"><link rel="prefetch" href="/bufan-doc/assets/js/65.6d2830f1.js"><link rel="prefetch" href="/bufan-doc/assets/js/66.65a4cc01.js"><link rel="prefetch" href="/bufan-doc/assets/js/67.7b270307.js"><link rel="prefetch" href="/bufan-doc/assets/js/68.a8fe45f4.js"><link rel="prefetch" href="/bufan-doc/assets/js/69.8f88d229.js"><link rel="prefetch" href="/bufan-doc/assets/js/7.e6ecd274.js"><link rel="prefetch" href="/bufan-doc/assets/js/70.1ddc66b4.js"><link rel="prefetch" href="/bufan-doc/assets/js/71.77170c41.js"><link rel="prefetch" href="/bufan-doc/assets/js/72.1dc4049b.js"><link rel="prefetch" href="/bufan-doc/assets/js/73.7da3757c.js"><link rel="prefetch" href="/bufan-doc/assets/js/74.2181d25c.js"><link rel="prefetch" href="/bufan-doc/assets/js/75.be8d5dc6.js"><link rel="prefetch" href="/bufan-doc/assets/js/76.4cbdb224.js"><link rel="prefetch" href="/bufan-doc/assets/js/77.5ee263b6.js"><link rel="prefetch" href="/bufan-doc/assets/js/78.6b078925.js"><link rel="prefetch" href="/bufan-doc/assets/js/79.414db56b.js"><link rel="prefetch" href="/bufan-doc/assets/js/8.156e0c5d.js"><link rel="prefetch" href="/bufan-doc/assets/js/80.213572d0.js"><link rel="prefetch" href="/bufan-doc/assets/js/81.33f5de66.js"><link rel="prefetch" href="/bufan-doc/assets/js/82.d854fa6f.js"><link rel="prefetch" href="/bufan-doc/assets/js/83.110c252e.js"><link rel="prefetch" href="/bufan-doc/assets/js/84.473df94b.js"><link rel="prefetch" href="/bufan-doc/assets/js/85.ee0c2c9c.js"><link rel="prefetch" href="/bufan-doc/assets/js/86.ec58ee6e.js"><link rel="prefetch" href="/bufan-doc/assets/js/87.82972f59.js"><link rel="prefetch" href="/bufan-doc/assets/js/88.23a39bc5.js"><link rel="prefetch" href="/bufan-doc/assets/js/89.4be8b33a.js"><link rel="prefetch" href="/bufan-doc/assets/js/9.44c09d8c.js"><link rel="prefetch" href="/bufan-doc/assets/js/90.44c2861c.js"><link rel="prefetch" href="/bufan-doc/assets/js/91.468becad.js"><link rel="prefetch" href="/bufan-doc/assets/js/92.9e5ceb34.js"><link rel="prefetch" href="/bufan-doc/assets/js/93.9032fb68.js"><link rel="prefetch" href="/bufan-doc/assets/js/94.d7e6c360.js"><link rel="prefetch" href="/bufan-doc/assets/js/95.0fa635fb.js"><link rel="prefetch" href="/bufan-doc/assets/js/96.c7a82be8.js"><link rel="prefetch" href="/bufan-doc/assets/js/97.bf5ce894.js"><link rel="prefetch" href="/bufan-doc/assets/js/98.9d46ee61.js"><link rel="prefetch" href="/bufan-doc/assets/js/99.40ccc798.js"><link rel="prefetch" href="/bufan-doc/assets/js/vendors~notification.8531c786.js">
    <link rel="stylesheet" href="/bufan-doc/assets/css/0.styles.4fc22246.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container" data-v-36ae5a00><header class="navbar" data-v-36ae5a00><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/bufan-doc/" class="home-link router-link-active"><!----> <span class="site-name">不凡学院前端100天</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/bufan-doc/learn/" class="nav-link">学习教程</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">配套资料</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/bufan-doc/learn/soft/" class="nav-link">前端工具</a></li><li class="dropdown-item"><!----> <a href="/bufan-doc/interview/" class="nav-link router-link-active">面试之道</a></li></ul></div></div><div class="nav-item"><a href="http://www.bufanui.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  不凡官网
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/nevermo2013/dingpq" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask" data-v-36ae5a00></div> <aside class="sidebar" data-v-36ae5a00><nav class="nav-links"><div class="nav-item"><a href="/bufan-doc/learn/" class="nav-link">学习教程</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">配套资料</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/bufan-doc/learn/soft/" class="nav-link">前端工具</a></li><li class="dropdown-item"><!----> <a href="/bufan-doc/interview/" class="nav-link router-link-active">面试之道</a></li></ul></div></div><div class="nav-item"><a href="http://www.bufanui.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  不凡官网
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/nevermo2013/dingpq" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav> <a href="http://www.bufanui.com" target="_blank" class="ads ads-top" data-v-36ae5a00><img src="/bufan-doc/assets/img/bf.b6eae9c3.jpg" alt="" class="ads-img" data-v-36ae5a00></a> <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>HTML+CSS基础</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/bufan-doc/interview/" class="sidebar-link">常考面试题</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>JS基础</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/bufan-doc/interview/js/js基础.html" class="active sidebar-link">JS 基础考点</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/bufan-doc/interview/js/js基础.html#数据类型" class="sidebar-link">数据类型</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/bufan-doc/interview/js/js基础.html#基本数据类型" class="sidebar-link">基本数据类型</a></li><li class="sidebar-sub-header"><a href="/bufan-doc/interview/js/js基础.html#引用数据类型" class="sidebar-link">引用数据类型</a></li></ul></li><li class="sidebar-sub-header"><a href="/bufan-doc/interview/js/js基础.html#类型转换" class="sidebar-link">类型转换</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/bufan-doc/interview/js/js基础.html#对象转原始类型" class="sidebar-link">对象转原始类型</a></li></ul></li><li class="sidebar-sub-header"><a href="/bufan-doc/interview/js/js基础.html#typeof-vs-instanceof" class="sidebar-link">typeof vs instanceof</a></li><li class="sidebar-sub-header"><a href="/bufan-doc/interview/js/js基础.html#this" class="sidebar-link">this</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/bufan-doc/interview/js/js基础.html#进一步理解如何改变-this-指向" class="sidebar-link">进一步理解如何改变 this 指向</a></li></ul></li><li class="sidebar-sub-header"><a href="/bufan-doc/interview/js/js基础.html#闭包" class="sidebar-link">闭包</a></li><li class="sidebar-sub-header"><a href="/bufan-doc/interview/js/js基础.html#深浅拷贝" class="sidebar-link">深浅拷贝</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/bufan-doc/interview/js/js基础.html#浅拷贝" class="sidebar-link">浅拷贝</a></li><li class="sidebar-sub-header"><a href="/bufan-doc/interview/js/js基础.html#深拷贝" class="sidebar-link">深拷贝</a></li></ul></li><li class="sidebar-sub-header"><a href="/bufan-doc/interview/js/js基础.html#进阶知识点" class="sidebar-link">进阶知识点</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/bufan-doc/interview/js/js基础.html#call-apply-和-bind-函数" class="sidebar-link">call apply 和 bind 函数</a></li><li class="sidebar-sub-header"><a href="/bufan-doc/interview/js/js基础.html#new" class="sidebar-link">new</a></li><li class="sidebar-sub-header"><a href="/bufan-doc/interview/js/js基础.html#instanceof-的原理" class="sidebar-link">instanceof 的原理</a></li><li class="sidebar-sub-header"><a href="/bufan-doc/interview/js/js基础.html#为什么-0-1-0-2-0-3" class="sidebar-link">为什么 0.1 + 0.2 != 0.3</a></li></ul></li></ul></li><li><a href="/bufan-doc/interview/js/ES6.html" class="sidebar-link">ES6 知识点</a></li><li><a href="/bufan-doc/interview/js/原型与继承.html" class="sidebar-link">原型与继承</a></li><li><a href="/bufan-doc/interview/js/异步编程与EventLoop.html" class="sidebar-link">异步编程 与 EventLoop</a></li><li><a href="/bufan-doc/interview/js/WebAPI.html" class="sidebar-link">JS-Web-API</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>浏览器与网络协议</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/bufan-doc/interview/chrome/浏览器相关基础.html" class="sidebar-link">浏览器相关基础</a></li><li><a href="/bufan-doc/interview/chrome/web安全.html" class="sidebar-link">Web 安全</a></li><li><a href="/bufan-doc/interview/chrome/网络协议.html" class="sidebar-link">HTTP</a></li><li><a href="/bufan-doc/interview/chrome/跨域.html" class="sidebar-link">跨域</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Vue基础</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/bufan-doc/interview/vue/Vue常考知识点.html" class="sidebar-link">Vue 常考基础知识点</a></li><li><a href="/bufan-doc/interview/vue/项目问题及解决方法.html" class="sidebar-link">Vue 项目常见问题及解决方法</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>性能优化</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/bufan-doc/interview/performance/" class="sidebar-link">前端性能优化</a></li><li><a href="/bufan-doc/interview/performance/提升加载速度.html" class="sidebar-link">减少页面体积，提升网络加载</a></li><li><a href="/bufan-doc/interview/performance/提升页面渲染.html" class="sidebar-link">优化页面渲染</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>设计模式与算法</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/bufan-doc/interview/design/设计模式.html" class="sidebar-link">设计模式</a></li><li><a href="/bufan-doc/interview/design/常见算法.html" class="sidebar-link">数据结构与算法</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>开发工具与环境</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/bufan-doc/interview/dev-env/" class="sidebar-link">开发环境相关知识点</a></li></ul></section></li></ul> </aside> <main class="page" data-v-36ae5a00> <div class="theme-default-content content__default"><h1 id="js-基础考点"><a href="#js-基础考点" class="header-anchor">#</a> JS 基础考点</h1> <h2 id="数据类型"><a href="#数据类型" class="header-anchor">#</a> 数据类型</h2> <h3 id="基本数据类型"><a href="#基本数据类型" class="header-anchor">#</a> 基本数据类型</h3> <blockquote><p>涉及面试题：原始(基本)类型有哪几种？null 是对象嘛？</p></blockquote> <p>在 JS 中，存在着 6 种原始值，分别是：</p> <ul><li>boolean</li> <li>null</li> <li>undefined</li> <li>number</li> <li>string</li> <li>symbol</li></ul> <p>首先原始类型存储的都是值，是没有函数可以调用的，比如 undefined.toString()</p> <p>此时你肯定会有疑问，这不对呀，明明 '1'.toString() 是可以使用的。其实在这种情况下，'1' 已经不是原始类型了，而是被强制转换成了 String 类型也就是对象类型，所以可以调用 toString 函数。</p> <p>除了会在必要的情况下强转类型以外，原始类型还有一些坑。</p> <p>其中 JS 的 number 类型是浮点类型的，在使用中会遇到某些 Bug，比如 0.1 + 0.2 !== 0.3，涉及到二进制转换的精度问题。string 类型是不可变的，无论你在 string 类型上调用何种方法，都不会对值有改变。</p> <p>另外对于 null 来说，很多人会认为他是个对象类型，其实这是错误的。虽然 typeof null 会输出 object，但是这只是 JS 存在的一个悠久 Bug。在 JS 的最初版本中使用的是 32 位系统，为了性能考虑使用低位存储变量的类型信息，000 开头代表是对象，然而 null 表示为全零，所以将它错误的判断为 object 。虽然现在的内部类型判断代码已经改变了，但是对于这个 Bug 却是一直流传下来。</p> <h3 id="引用数据类型"><a href="#引用数据类型" class="header-anchor">#</a> 引用数据类型</h3> <blockquote><p>涉及面试题：引用类型和原始类型的不同之处？函数参数是引用数据类型时的问题？</p></blockquote> <p>在 JS 中，除了原始类型那么其他的都是引用类型了。引用类型和原始类型不同的是，原始类型存储的是值，引用类型存储的是地址（指针）。当你创建了一个对象的时候，计算机会在内存中帮我们开辟一个空间来存放值，但是我们需要找到这个空间，这个空间会拥有一个地址（指针）。</p> <p><code>const a = []</code>
对于常量 a 来说，假设内存地址（指针）为 #001，那么在地址 #001 的位置存放了值 []，常量 a 存放了地址（指针） #001，再看以下代码</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> b <span class="token operator">=</span> a<span class="token punctuation">;</span>
b<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>当我们将变量赋值给另外一个变量时，复制的是原本变量的地址（指针），也就是说当前变量 b 存放的地址（指针）也是 #001，当我们进行数据修改的时候，就会修改存放在地址（指针） #001 上的值，也就导致了两个变量的值都发生了改变。</p> <h2 id="类型转换"><a href="#类型转换" class="header-anchor">#</a> 类型转换</h2> <p>类型转换只有三种情况:</p> <ul><li>转为布尔值</li> <li>转为数字</li> <li>转为字符串</li></ul> <table><thead><tr><th>原始值</th> <th>转换目标</th> <th>结果</th></tr></thead> <tbody><tr><td>undefined null NaN '' 0 和-0</td> <td>布尔值</td> <td>false</td></tr> <tr><td>除以上几种情况</td> <td>布尔值</td> <td>true</td></tr> <tr><td>number</td> <td>字符串</td> <td>5=&gt;'5'</td></tr> <tr><td>boolean 函数 Symbol</td> <td>字符串</td> <td>'true'</td></tr> <tr><td>数组</td> <td>字符串</td> <td>[1,2]=&gt;'1,2'</td></tr> <tr><td>对象</td> <td>字符串</td> <td>'[object object]'</td></tr> <tr><td>string</td> <td>数字</td> <td>'5'=&gt;5 'a'=&gt;NaN</td></tr> <tr><td>null</td> <td>数字</td> <td>0</td></tr></tbody></table> <p>| 数组 | 数字 | 空数组为 0,存在一个元素且为数字转成数字,其他情况 NaN |</p> <p>| 除了数组的引用类型 | 数字 | NaN |
| Symbol | 数字 | 抛错 |</p> <h3 id="对象转原始类型"><a href="#对象转原始类型" class="header-anchor">#</a> 对象转原始类型</h3> <p>对象在转换类型的时候，会调用内置的 [[ToPrimitive]] 函数，对于该函数来说，算法逻辑一般来说如下：</p> <p>如果已经是原始类型了，那就不需要转换了
调用 x.valueOf()，如果转换为基础类型，就返回转换的值
调用 x.toString()，如果转换为基础类型，就返回转换的值
如果都没有返回原始类型，就会报错
当然你也可以重写 Symbol.toPrimitive ，该方法在转原始类型时调用优先级最高。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token string">&quot;1&quot;</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>toPrimitive<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token number">2</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token number">1</span> <span class="token operator">+</span> a<span class="token punctuation">;</span> <span class="token comment">// =&gt; 3</span>
</code></pre></div><blockquote><p>相关面试题:下面代码中 a 在什么情况下会打印 1？</p></blockquote> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token operator">?</span><span class="token punctuation">;</span>
<span class="token keyword">if</span><span class="token punctuation">(</span>a <span class="token operator">==</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> a <span class="token operator">==</span> <span class="token number">2</span> <span class="token operator">&amp;&amp;</span> a <span class="token operator">==</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
 	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>答案解析: 因为==会进行隐式类型转换 所以我们重写 toString 方法就可以了</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token punctuation">{</span>
	i<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
	<span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> a<span class="token punctuation">.</span>i<span class="token operator">++</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span>a <span class="token operator">==</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> a <span class="token operator">==</span> <span class="token number">2</span> <span class="token operator">&amp;&amp;</span> a <span class="token operator">==</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="typeof-vs-instanceof"><a href="#typeof-vs-instanceof" class="header-anchor">#</a> typeof vs instanceof</h2> <blockquote><p>涉及面试题：typeof 是否能正确判断类型？instanceof 能正确判断对象的原理是什么？</p></blockquote> <p>typeof 对于原始类型来说，除了 null 都可以显示正确的类型</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">typeof</span> <span class="token number">1</span> <span class="token comment">// 'number'</span>
<span class="token keyword">typeof</span> <span class="token string">'1'</span> <span class="token comment">// 'string'</span>
<span class="token keyword">typeof</span> <span class="token keyword">undefined</span> <span class="token comment">// 'undefined'</span>
<span class="token keyword">typeof</span> <span class="token boolean">true</span> <span class="token comment">// 'boolean'</span>
<span class="token keyword">typeof</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 'symbol'</span>
<span class="token keyword">typeof</span> 对于对象来说，除了函数都会显示 object，所以说 <span class="token keyword">typeof</span> 并不能准确判断变量到底是什么类型

<span class="token keyword">typeof</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token comment">// 'object'</span>
<span class="token keyword">typeof</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment">// 'object'</span>
<span class="token keyword">typeof</span> console<span class="token punctuation">.</span>log <span class="token comment">// 'function'</span>

</code></pre></div><p>如果我们想判断一个对象的正确类型，这时候可以考虑使用 instanceof，因为内部机制是通过原型链来判断的(可以延伸讲一下自己对原型链的理解)。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">Person</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> p1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
p1 <span class="token keyword">instanceof</span> <span class="token class-name">Person</span><span class="token punctuation">;</span> <span class="token comment">// true</span>

<span class="token keyword">var</span> str <span class="token operator">=</span> <span class="token string">&quot;hello world&quot;</span><span class="token punctuation">;</span>
str <span class="token keyword">instanceof</span> <span class="token class-name">String</span><span class="token punctuation">;</span> <span class="token comment">// false</span>

<span class="token keyword">var</span> str1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span><span class="token string">&quot;hello world&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
str1 <span class="token keyword">instanceof</span> <span class="token class-name">String</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
</code></pre></div><h2 id="this"><a href="#this" class="header-anchor">#</a> this</h2> <blockquote><p>涉及面试题：如何正确判断 this？箭头函数的 this 是什么？</p></blockquote> <p>this 是很多人会混淆的概念，但是其实它一点都不难，只是网上很多文章把简单的东西说复杂了。</p> <p>我们先来看几个函数调用的场景</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
	a<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
	foo<span class="token punctuation">:</span> foo<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
obj<span class="token punctuation">.</span><span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> c <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>接下来我们一个个分析上面几个场景</p> <ul><li>对于直接调用 <code>foo</code> 来说，不管 <code>foo</code> 函数被放在了什么地方，<code>this</code> 一定是 <code>window</code></li> <li>对于 <code>obj.foo()</code> 来说，我们只需要记住，谁调用了函数，谁就是 <code>this</code>，所以在这个场景下 <code>foo</code> 函数中的 <code>this</code> 就是 <code>obj</code> 对象</li> <li>对于 <code>new</code> 的方式来说，<code>this</code> 被永远绑定在了 <code>c</code> 上面，不会被任何方式改变 <code>this</code></li></ul> <p>说完了以上几种情况，其实很多代码中的 this 应该就没什么问题了，下面让我们看看箭头函数中的 <code>this</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">a</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
			console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">a</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>首先箭头函数其实是没有 <code>this</code> 的，箭头函数中的 this 只取决包裹箭头函数的第一个普通函数的 <code>this</code>。在这个例子中，因为包裹箭头函数的第一个普通函数是 <code>a</code>，所以此时的 <code>this</code> 是 <code>window</code>。另外对箭头函数使用 <code>bind</code> 这类函数是无效的。</p> <h3 id="进一步理解如何改变-this-指向"><a href="#进一步理解如何改变-this-指向" class="header-anchor">#</a> 进一步理解如何改变 this 指向</h3> <p>最后种情况也就是 <code>bind</code>,<code>apply</code>,<code>call</code> 这些改变上下文的 API 了，对于这些函数来说，<code>this</code> 取决于第一个参数，如果第一个参数为空，那么就是 <code>window</code>。</p> <p>以上就是 <code>this</code> 的规则了，但是可能会发生多个规则同时出现的情况，这时候不同的规则之间会根据优先级最高的来决定 <code>this</code> 最终指向哪里。</p> <p>首先，<code>new</code> 的方式优先级最高，接下来是 <code>bind</code> 这些函数，然后是 <code>obj.foo()</code> 这种调用方式，最后是 <code>foo</code> 这种调用方式，同时，箭头函数的 <code>this</code> 一旦被绑定，就不会再被任何方式所改变。</p> <h2 id="闭包"><a href="#闭包" class="header-anchor">#</a> 闭包</h2> <blockquote><p>涉及面试题：什么是闭包？</p></blockquote> <p>闭包的定义其实很简单：函数 A 内部有一个函数 B，函数 B 可以访问到函数 A 中的变量，那么函数 B 就是闭包。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token constant">A</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
	window<span class="token punctuation">.</span><span class="token function-variable function">B</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token constant">A</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token constant">B</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1</span>
</code></pre></div><p>很多人对于闭包的解释可能是函数嵌套了函数，然后返回一个函数。其实这个解释是不完整的，就比如我上面这个例子就可以反驳这个观点。</p> <p>在 JS 中，闭包存在的意义就是让我们可以间接访问函数内部的变量。</p> <blockquote><p>面试题:修改代码,输出 1,2,3,4,5</p></blockquote> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">timer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span> i <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>首先因为 setTimeout 是个异步函数，所以会先把循环全部执行完毕，这时候 i 就是 6 了，所以会输出一堆 6。</p> <p>解决办法有三种，第一种是使用闭包的方式</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">j</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">timer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>j<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span> j <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>在上述代码中，我们首先使用了立即执行函数将 i 传入函数内部，这个时候值就被固定在了参数 j 上面不会改变，当下次执行 timer 这个闭包的时候，就可以使用外部函数的变量 j，从而达到目的。</p> <p>第二种就是使用 setTimeout 的第三个参数，这个参数会被当成 timer 函数的参数传入。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token function">setTimeout</span><span class="token punctuation">(</span>
		<span class="token keyword">function</span> <span class="token function">timer</span><span class="token punctuation">(</span><span class="token parameter">j</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>j<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		i <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">,</span>
		i<span class="token punctuation">,</span>
	<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>第三种就是使用 let 定义 i 了来解决问题了，这个也是最为推荐的方式</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">timer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span> i <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="深浅拷贝"><a href="#深浅拷贝" class="header-anchor">#</a> 深浅拷贝</h2> <blockquote><p>涉及面试题：什么是浅拷贝？如何实现浅拷贝？什么是深拷贝？如何实现深拷贝？</p></blockquote> <p>我们了解了对象类型在赋值的过程中其实是复制了地址，从而会导致改变了一方其他也都被改变的情况。通常在开发中我们不希望出现这样的问题，我们可以使用浅拷贝来解决这个情况。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token punctuation">{</span>
	age<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> b <span class="token operator">=</span> a<span class="token punctuation">;</span>
a<span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b<span class="token punctuation">.</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 2</span>
</code></pre></div><h3 id="浅拷贝"><a href="#浅拷贝" class="header-anchor">#</a> 浅拷贝</h3> <p>首先可以通过 Object.assign 来解决这个问题，很多人认为这个函数是用来深拷贝的。其实并不是，Object.assign 只会拷贝所有的属性值到新的对象中，如果属性值是对象的话，拷贝的是地址，所以并不是深拷贝。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token punctuation">{</span>
	age<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> b <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> a<span class="token punctuation">)</span><span class="token punctuation">;</span>
a<span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b<span class="token punctuation">.</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1</span>
</code></pre></div><p>另外我们还可以通过展开运算符 ... 来实现浅拷贝</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token punctuation">{</span>
	age<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> b <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token operator">...</span>a <span class="token punctuation">}</span><span class="token punctuation">;</span>
a<span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b<span class="token punctuation">.</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1</span>
</code></pre></div><p>通常浅拷贝就能解决大部分问题了，但是当我们遇到如下情况就可能需要使用到深拷贝了</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token punctuation">{</span>
	age<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
	jobs<span class="token punctuation">:</span> <span class="token punctuation">{</span>
		first<span class="token punctuation">:</span> <span class="token string">&quot;FE&quot;</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> b <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token operator">...</span>a <span class="token punctuation">}</span><span class="token punctuation">;</span>
a<span class="token punctuation">.</span>jobs<span class="token punctuation">.</span>first <span class="token operator">=</span> <span class="token string">&quot;native&quot;</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b<span class="token punctuation">.</span>jobs<span class="token punctuation">.</span>first<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// native</span>
</code></pre></div><p>浅拷贝只解决了第一层的问题，如果接下去的值中还有对象的话，那么就又回到最开始的话题了，两者享有相同的地址。要解决这个问题，我们就得使用深拷贝了。</p> <h3 id="深拷贝"><a href="#深拷贝" class="header-anchor">#</a> 深拷贝</h3> <p>这个问题通常可以通过 <code>JSON.parse(JSON.stringify(object))</code> 来解决。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token punctuation">{</span>
	age<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
	jobs<span class="token punctuation">:</span> <span class="token punctuation">{</span>
		first<span class="token punctuation">:</span> <span class="token string">&quot;FE&quot;</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> b <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
a<span class="token punctuation">.</span>jobs<span class="token punctuation">.</span>first <span class="token operator">=</span> <span class="token string">&quot;native&quot;</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b<span class="token punctuation">.</span>jobs<span class="token punctuation">.</span>first<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// FE</span>
</code></pre></div><p>但是该方法也是有局限性的：</p> <ul><li>会忽略 undefined</li> <li>会忽略 symbol</li> <li>不能序列化函数</li> <li>不能解决循环引用的对象</li></ul> <p>但是在通常情况下，复杂数据都是可以序列化的，所以这个函数可以解决大部分问题。</p> <p>当然你可能想自己来实现一个深拷贝，但是其实实现一个深拷贝是很困难的，需要我们考虑好多种边界情况，比如原型链如何处理、DOM 如何处理等等，所以这里我们实现的深拷贝只是简易版，并且我其实更推荐使用 <code>lodash</code> 的深拷贝函数。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">deepClone</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">function</span> <span class="token function">isObject</span><span class="token punctuation">(</span><span class="token parameter">o</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> o <span class="token operator">===</span> <span class="token string">&quot;object&quot;</span> <span class="token operator">||</span> <span class="token keyword">typeof</span> o <span class="token operator">===</span> <span class="token string">&quot;function&quot;</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> o <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">isObject</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&quot;非对象&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">let</span> isArray <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">let</span> newObj <span class="token operator">=</span> isArray <span class="token operator">?</span> <span class="token punctuation">[</span><span class="token operator">...</span>obj<span class="token punctuation">]</span> <span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token operator">...</span>obj <span class="token punctuation">}</span><span class="token punctuation">;</span>
	Reflect<span class="token punctuation">.</span><span class="token function">ownKeys</span><span class="token punctuation">(</span>newObj<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">key</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
		newObj<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">isObject</span><span class="token punctuation">(</span>obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token function">deepClone</span><span class="token punctuation">(</span>obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token keyword">return</span> newObj<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
	a<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
	b<span class="token punctuation">:</span> <span class="token punctuation">{</span>
		c<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
		d<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> newObj <span class="token operator">=</span> <span class="token function">deepClone</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
newObj<span class="token punctuation">.</span>b<span class="token punctuation">.</span>c <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>b<span class="token punctuation">.</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 2</span>
</code></pre></div><h2 id="进阶知识点"><a href="#进阶知识点" class="header-anchor">#</a> 进阶知识点</h2> <h3 id="call-apply-和-bind-函数"><a href="#call-apply-和-bind-函数" class="header-anchor">#</a> call apply 和 bind 函数</h3> <blockquote><p>涉及面试题：call、apply 及 bind 函数三者的区别及内部实现是怎么样的？</p></blockquote> <ul><li>三者都会将函数的 this 指向 第一个参数</li> <li>call 和 apply 返回函数执行的结果, bind 返回的是修改过 this 指向的一个函数</li> <li>参数形式不同, apply 后续参数为数组</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">myCall</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">context</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// 思路: 让context可以执行该函数,转变为给context添加该函数,运行后删除即可</span>
	<span class="token keyword">var</span> context <span class="token operator">=</span> context <span class="token operator">||</span> window<span class="token punctuation">;</span>
	<span class="token comment">// getValue.call(obj, 'bufan');</span>
	context<span class="token punctuation">.</span>fn <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span> <span class="token comment">// this指向调用者 也就是该函数</span>
	<span class="token comment">// 参数</span>
	<span class="token keyword">var</span> args <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>arguments<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">var</span> result <span class="token operator">=</span> context<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">delete</span> context<span class="token punctuation">.</span>fn<span class="token punctuation">;</span>
	<span class="token keyword">return</span> result<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>以下是对实现的分析：</p> <p>首先 <code>context</code> 为可选参数，如果不传的话默认上下文为 <code>window</code>
接下来给 <code>context</code> 创建一个 <code>fn</code> 属性，并将值设置为需要调用的函数
因为 <code>call</code> 可以传入多个参数作为调用函数的参数，所以需要将参数剥离出来
然后调用函数并将对象上的函数删除</p> <p>以上就是实现 <code>call</code> 的思路，<code>apply</code> 的实现也类似，区别在于对参数的处理</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">myApply</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">context</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">var</span> context <span class="token operator">=</span> context <span class="token operator">||</span> window<span class="token punctuation">;</span>
	context<span class="token punctuation">.</span>fn <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
	<span class="token comment">// 后续参数</span>
	<span class="token keyword">var</span> result<span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>arguments<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		result <span class="token operator">=</span> context<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token operator">...</span>arguments<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
		result <span class="token operator">=</span> context<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">delete</span> context<span class="token punctuation">.</span>fn<span class="token punctuation">;</span>
	<span class="token keyword">return</span> result<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p><code>bind</code> 的实现对比其他两个函数略微地复杂了一点，因为 bind 需要返回一个函数，需要判断一些边界问题</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// 会创建一个新函数。</span>
<span class="token comment">// 当这个新函数被调用时，bind() 的第一个参数将作为它运行时的 this，</span>
<span class="token comment">// 之后的一序列参数将会在传递的实参前传入作为它的参数。(来自于 MDN )</span>
<span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">myBind</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">context</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> <span class="token keyword">this</span> <span class="token operator">!==</span> <span class="token string">&quot;function&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">TypeError</span><span class="token punctuation">(</span><span class="token string">&quot;error&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">var</span> _this <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
	<span class="token comment">// 参数</span>
	<span class="token keyword">var</span> args <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>arguments<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">// 返回一个函数</span>
	<span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token constant">F</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">// 所以需要判断 new F()</span>
		<span class="token comment">// 在构造器内</span>
		<span class="token comment">// instanceof 可以判断 F 是作为构造器使用(true)  还是  普通函数使用(false)</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token keyword">instanceof</span> <span class="token class-name">F</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">_this</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">,</span> <span class="token operator">...</span>arguments<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token function">_this</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> args<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span><span class="token operator">...</span>arguments<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>以下是对实现的分析：</p> <p><code>bind</code> 返回了一个函数，对于函数来说有两种方式调用，一种是直接调用，一种是通过 <code>new</code> 的方式，我们先来说直接调用的方式
对于直接调用来说，这里选择了 <code>apply</code> 的方式实现，但是对于参数需要注意以下情况：因为 <code>bind</code> 可以实现类似这样的代码 <code>f.bind(obj, 1)(2)</code>，所以我们需要将两边的参数拼接起来，于是就有了这样的实现 <code>args.concat(...arguments)</code>
最后来说通过 <code>new</code> 的方式，在之前的章节中我们学习过如何判断 <code>this</code>，对于 <code>new</code> 的情况来说，不会被任何方式改变 <code>this</code>，所以对于这种情况我们需要忽略传入的 <code>this</code></p> <h3 id="new"><a href="#new" class="header-anchor">#</a> new</h3> <blockquote><p>涉及面试题：new 的原理是什么？通过 new 的方式创建对象和通过字面量创建有什么区别？</p></blockquote> <p>在调用 new 的过程中会发生以上四件事情：</p> <ul><li>新生成了一个对象</li> <li>链接到原型</li> <li>绑定 this</li> <li>返回新对象</li></ul> <p>根据以上几个过程，我们也可以试着来自己实现一个 new</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">myNew</span><span class="token punctuation">(</span><span class="token parameter">fn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>fn<span class="token punctuation">.</span>prototype <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		obj<span class="token punctuation">.</span>__proto__ <span class="token operator">=</span> fn<span class="token punctuation">.</span>prototype<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token comment">// var args = [...arguments].slice(1);</span>
	<span class="token keyword">var</span> result <span class="token operator">=</span> <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span>arguments<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> result <span class="token operator">===</span> <span class="token string">&quot;object&quot;</span> <span class="token operator">||</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> result <span class="token operator">===</span> <span class="token string">&quot;function&quot;</span> <span class="token operator">&amp;&amp;</span> result <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> result<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> obj<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>对于对象来说，其实都是通过 <code>new</code> 产生的，无论是 <code>function Foo()</code> 还是 <code>let a = { b : 1 }</code> 。</p> <p>对于创建一个对象来说，更推荐使用字面量的方式创建对象（无论性能上还是可读性）。因为你使用 <code>new Object()</code> 的方式创建对象需要通过作用域链一层层找到 <code>Object</code>，但是你使用字面量的方式就没这个问题。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">Foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token comment">// function 就是个语法糖</span>
<span class="token comment">// 内部等同于 new Function()</span>
<span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token punctuation">{</span> b<span class="token punctuation">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// 这个字面量内部也是使用了 new Object()</span>
</code></pre></div><h3 id="instanceof-的原理"><a href="#instanceof-的原理" class="header-anchor">#</a> instanceof 的原理</h3> <blockquote><p>涉及面试题：instanceof 的原理是什么？</p></blockquote> <p>instanceof 可以正确的判断对象的类型，因为内部机制是通过判断对象的原型链中是不是能找到类型的 prototype。</p> <p>我们也可以试着实现一下 instanceof</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">myInstanceof</span><span class="token punctuation">(</span><span class="token parameter">left<span class="token punctuation">,</span> right</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">let</span> prototype <span class="token operator">=</span> right<span class="token punctuation">.</span>prototype<span class="token punctuation">;</span>
	<span class="token keyword">let</span> left <span class="token operator">=</span> left<span class="token punctuation">.</span>__proto__<span class="token punctuation">;</span>
	<span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>left <span class="token operator">===</span> <span class="token keyword">null</span> <span class="token operator">||</span> left <span class="token operator">===</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>prototype <span class="token operator">===</span> left<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
		left <span class="token operator">=</span> left<span class="token punctuation">.</span>__proto__<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>以下是对实现的分析：</p> <p>首先获取类型的原型
然后获得对象的原型
然后一直循环判断对象的原型是否等于类型的原型，直到对象原型为 null，因为原型链最终为 null</p> <h3 id="为什么-0-1-0-2-0-3"><a href="#为什么-0-1-0-2-0-3" class="header-anchor">#</a> 为什么 0.1 + 0.2 != 0.3</h3> <blockquote><p>涉及面试题：为什么 0.1 + 0.2 != 0.3？如何解决这个问题？</p></blockquote> <p>先说原因，因为 JS 采用 IEEE 754 双精度版本（64 位），并且只要采用 IEEE 754 的语言都有该问题。</p> <p>我们都知道计算机是通过二进制来存储东西的，那么 0.1 在二进制中会表示为</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// (0011) 表示循环</span>
<span class="token number">0.1</span> <span class="token operator">=</span> <span class="token number">2</span> <span class="token operator">^</span> <span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">4</span> <span class="token operator">*</span> <span class="token number">1.10011</span><span class="token punctuation">(</span><span class="token number">0011</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>我们可以发现，<code>0.1</code> 在二进制中是无限循环的一些数字，其实不只是 <code>0.1</code>，其实很多十进制小数用二进制表示都是无限循环的。这样其实没什么问题，但是 JS 采用的浮点数标准却会裁剪掉我们的数字。</p> <p>IEEE 754 双精度版本（64 位）将 64 位分为了三段</p> <p>第一位用来表示符号
接下去的 <code>11</code> 位用来表示指数
其他的位数用来表示有效位，也就是用二进制表示 <code>0.1</code> 中的 <code>10011(0011)</code>
那么这些循环的数字被裁剪了，就会出现精度丢失的问题，也就造成了 <code>0.1</code> 不再是 <code>0.1</code> 了，而是变成了 <code>0.100000000000000002</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token number">0.100000000000000002</span> <span class="token operator">===</span> <span class="token number">0.1</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
</code></pre></div><p>那么同样的，<code>0.2</code> 在二进制也是无限循环的，被裁剪后也失去了精度变成了 <code>0.200000000000000002</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token number">0.200000000000000002</span> <span class="token operator">===</span> <span class="token number">0.2</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
</code></pre></div><p>所以这两者相加不等于 <code>0.3</code> 而是 <code>0.300000000000000004</code></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token number">0.1</span> <span class="token operator">+</span> <span class="token number">0.2</span> <span class="token operator">===</span> <span class="token number">0.30000000000000004</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
</code></pre></div><p>那么可能你又会有一个疑问，既然 <code>0.1</code> 不是 <code>0.1</code>，那为什么 <code>console.log(0.1)</code> 却是正确的呢？</p> <p>因为在输入内容的时候，二进制被转换为了十进制，十进制又被转换为了字符串，在这个转换的过程中发生了取近似值的过程，所以打印出来的其实是一个近似值，你也可以通过以下代码来验证</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">0.100000000000000002</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 0.1</span>
</code></pre></div><p>那么说完了为什么，最后来说说怎么解决这个问题吧。其实解决的办法有很多，这里我们选用原生提供的方式来最简单的解决问题</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function">parseFloat</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">0.1</span> <span class="token operator">+</span> <span class="token number">0.2</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token number">0.3</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
</code></pre></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新: </span> <span class="time">11/22/2019, 10:01:47 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/bufan-doc/interview/" class="prev router-link-active">
          常考面试题
        </a></span> <span class="next"><a href="/bufan-doc/interview/js/ES6.html">
          ES6 知识点
        </a>
        →
      </span></p></div> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/bufan-doc/assets/js/app.f4cc6427.js" defer></script><script src="/bufan-doc/assets/js/4.d60abc91.js" defer></script><script src="/bufan-doc/assets/js/3.08e48031.js" defer></script><script src="/bufan-doc/assets/js/38.45b62383.js" defer></script><script src="/bufan-doc/assets/js/14.618a24b7.js" defer></script>
  </body>
</html>
