<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>面向对象 | 不凡学院前端100天</title>
    <meta name="description" content="快速上手,循序渐进">
    <link rel="icon" href="/bufan-doc/logo.jpg">
  <link rel="manifest" href="/bufan-doc/manifest.json">
  <meta name="theme-color" content="#3eaf7c">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <link rel="apple-touch-icon" href="/bufan-doc/icons/apple-touch-icon-152x152.png">
  <link rel="mask-icon" href="/bufan-doc/icons/safari-pinned-tab.svg" color="#3eaf7c">
  <meta name="msapplication-TileImage" content="/icons/msapplication-icon-144x144.png">
  <meta name="msapplication-TileColor" content="#000000">
    
    <link rel="preload" href="/bufan-doc/assets/css/0.styles.4fc22246.css" as="style"><link rel="preload" href="/bufan-doc/assets/js/app.f4cc6427.js" as="script"><link rel="preload" href="/bufan-doc/assets/js/4.d60abc91.js" as="script"><link rel="preload" href="/bufan-doc/assets/js/3.08e48031.js" as="script"><link rel="preload" href="/bufan-doc/assets/js/76.4cbdb224.js" as="script"><link rel="preload" href="/bufan-doc/assets/js/14.618a24b7.js" as="script"><link rel="prefetch" href="/bufan-doc/assets/js/10.3b8a5562.js"><link rel="prefetch" href="/bufan-doc/assets/js/100.4ba68262.js"><link rel="prefetch" href="/bufan-doc/assets/js/101.6db92bf8.js"><link rel="prefetch" href="/bufan-doc/assets/js/102.01d55fe2.js"><link rel="prefetch" href="/bufan-doc/assets/js/103.4104b1e2.js"><link rel="prefetch" href="/bufan-doc/assets/js/104.af35539f.js"><link rel="prefetch" href="/bufan-doc/assets/js/105.64f144d2.js"><link rel="prefetch" href="/bufan-doc/assets/js/106.1ad49cc0.js"><link rel="prefetch" href="/bufan-doc/assets/js/107.b3243d38.js"><link rel="prefetch" href="/bufan-doc/assets/js/108.e4f06cdf.js"><link rel="prefetch" href="/bufan-doc/assets/js/109.f82c6f4f.js"><link rel="prefetch" href="/bufan-doc/assets/js/11.dabd9edf.js"><link rel="prefetch" href="/bufan-doc/assets/js/110.43ef8a19.js"><link rel="prefetch" href="/bufan-doc/assets/js/111.8d21dabd.js"><link rel="prefetch" href="/bufan-doc/assets/js/112.97d55372.js"><link rel="prefetch" href="/bufan-doc/assets/js/113.17be5afc.js"><link rel="prefetch" href="/bufan-doc/assets/js/114.7c7c0031.js"><link rel="prefetch" href="/bufan-doc/assets/js/115.6191c96c.js"><link rel="prefetch" href="/bufan-doc/assets/js/116.f8406fce.js"><link rel="prefetch" href="/bufan-doc/assets/js/117.7e6ced5f.js"><link rel="prefetch" href="/bufan-doc/assets/js/118.95f2b2c6.js"><link rel="prefetch" href="/bufan-doc/assets/js/119.656fb4a6.js"><link rel="prefetch" href="/bufan-doc/assets/js/12.28f15829.js"><link rel="prefetch" href="/bufan-doc/assets/js/120.884f6058.js"><link rel="prefetch" href="/bufan-doc/assets/js/121.1ea98fcd.js"><link rel="prefetch" href="/bufan-doc/assets/js/122.ff3c9d25.js"><link rel="prefetch" href="/bufan-doc/assets/js/123.2d0a0879.js"><link rel="prefetch" href="/bufan-doc/assets/js/124.dbee8ca1.js"><link rel="prefetch" href="/bufan-doc/assets/js/125.fe02abe6.js"><link rel="prefetch" href="/bufan-doc/assets/js/126.ea7f7bb5.js"><link rel="prefetch" href="/bufan-doc/assets/js/127.606c2de1.js"><link rel="prefetch" href="/bufan-doc/assets/js/128.0f2b467b.js"><link rel="prefetch" href="/bufan-doc/assets/js/129.97cbaeca.js"><link rel="prefetch" href="/bufan-doc/assets/js/13.83be0207.js"><link rel="prefetch" href="/bufan-doc/assets/js/15.671b0072.js"><link rel="prefetch" href="/bufan-doc/assets/js/16.6425c53e.js"><link rel="prefetch" href="/bufan-doc/assets/js/17.f748524f.js"><link rel="prefetch" href="/bufan-doc/assets/js/18.dae45be7.js"><link rel="prefetch" href="/bufan-doc/assets/js/19.a61fe4f0.js"><link rel="prefetch" href="/bufan-doc/assets/js/20.80399a10.js"><link rel="prefetch" href="/bufan-doc/assets/js/21.d424c18b.js"><link rel="prefetch" href="/bufan-doc/assets/js/22.5d82a21d.js"><link rel="prefetch" href="/bufan-doc/assets/js/23.36b6d0a0.js"><link rel="prefetch" href="/bufan-doc/assets/js/24.b2436ce4.js"><link rel="prefetch" href="/bufan-doc/assets/js/25.d0c6e25f.js"><link rel="prefetch" href="/bufan-doc/assets/js/26.b5e3c19c.js"><link rel="prefetch" href="/bufan-doc/assets/js/27.a524df1a.js"><link rel="prefetch" href="/bufan-doc/assets/js/28.25c0ed5e.js"><link rel="prefetch" href="/bufan-doc/assets/js/29.f9b5a855.js"><link rel="prefetch" href="/bufan-doc/assets/js/30.67d39ab6.js"><link rel="prefetch" href="/bufan-doc/assets/js/31.92b1b15d.js"><link rel="prefetch" href="/bufan-doc/assets/js/32.f4e82e10.js"><link rel="prefetch" href="/bufan-doc/assets/js/33.8e078611.js"><link rel="prefetch" href="/bufan-doc/assets/js/34.b4bea20d.js"><link rel="prefetch" href="/bufan-doc/assets/js/35.24d90a48.js"><link rel="prefetch" href="/bufan-doc/assets/js/36.ef702182.js"><link rel="prefetch" href="/bufan-doc/assets/js/37.f5cc6f4f.js"><link rel="prefetch" href="/bufan-doc/assets/js/38.45b62383.js"><link rel="prefetch" href="/bufan-doc/assets/js/39.5351a017.js"><link rel="prefetch" href="/bufan-doc/assets/js/40.39da4318.js"><link rel="prefetch" href="/bufan-doc/assets/js/41.bc5678de.js"><link rel="prefetch" href="/bufan-doc/assets/js/42.f4a5cc7c.js"><link rel="prefetch" href="/bufan-doc/assets/js/43.83e2ec23.js"><link rel="prefetch" href="/bufan-doc/assets/js/44.4675ab38.js"><link rel="prefetch" href="/bufan-doc/assets/js/45.72d3f200.js"><link rel="prefetch" href="/bufan-doc/assets/js/46.8d77ad14.js"><link rel="prefetch" href="/bufan-doc/assets/js/47.7daeae21.js"><link rel="prefetch" href="/bufan-doc/assets/js/48.8c3532fd.js"><link rel="prefetch" href="/bufan-doc/assets/js/49.d2ceb345.js"><link rel="prefetch" href="/bufan-doc/assets/js/5.38bfdf08.js"><link rel="prefetch" href="/bufan-doc/assets/js/50.41300c4a.js"><link rel="prefetch" href="/bufan-doc/assets/js/51.7123e828.js"><link rel="prefetch" href="/bufan-doc/assets/js/52.96ab2ac5.js"><link rel="prefetch" href="/bufan-doc/assets/js/53.01bcfe44.js"><link rel="prefetch" href="/bufan-doc/assets/js/54.379a6e11.js"><link rel="prefetch" href="/bufan-doc/assets/js/55.05379669.js"><link rel="prefetch" href="/bufan-doc/assets/js/56.380aaeac.js"><link rel="prefetch" href="/bufan-doc/assets/js/57.5638cfe7.js"><link rel="prefetch" href="/bufan-doc/assets/js/58.4aaf9b06.js"><link rel="prefetch" href="/bufan-doc/assets/js/59.6db0022e.js"><link rel="prefetch" href="/bufan-doc/assets/js/6.2c430a05.js"><link rel="prefetch" href="/bufan-doc/assets/js/60.5b1ba8d4.js"><link rel="prefetch" href="/bufan-doc/assets/js/61.f226504c.js"><link rel="prefetch" href="/bufan-doc/assets/js/62.2563abf3.js"><link rel="prefetch" href="/bufan-doc/assets/js/63.94b44c4a.js"><link rel="prefetch" href="/bufan-doc/assets/js/64.2b0b61cf.js"><link rel="prefetch" href="/bufan-doc/assets/js/65.6d2830f1.js"><link rel="prefetch" href="/bufan-doc/assets/js/66.65a4cc01.js"><link rel="prefetch" href="/bufan-doc/assets/js/67.7b270307.js"><link rel="prefetch" href="/bufan-doc/assets/js/68.a8fe45f4.js"><link rel="prefetch" href="/bufan-doc/assets/js/69.8f88d229.js"><link rel="prefetch" href="/bufan-doc/assets/js/7.e6ecd274.js"><link rel="prefetch" href="/bufan-doc/assets/js/70.1ddc66b4.js"><link rel="prefetch" href="/bufan-doc/assets/js/71.77170c41.js"><link rel="prefetch" href="/bufan-doc/assets/js/72.1dc4049b.js"><link rel="prefetch" href="/bufan-doc/assets/js/73.7da3757c.js"><link rel="prefetch" href="/bufan-doc/assets/js/74.2181d25c.js"><link rel="prefetch" href="/bufan-doc/assets/js/75.be8d5dc6.js"><link rel="prefetch" href="/bufan-doc/assets/js/77.5ee263b6.js"><link rel="prefetch" href="/bufan-doc/assets/js/78.6b078925.js"><link rel="prefetch" href="/bufan-doc/assets/js/79.414db56b.js"><link rel="prefetch" href="/bufan-doc/assets/js/8.156e0c5d.js"><link rel="prefetch" href="/bufan-doc/assets/js/80.213572d0.js"><link rel="prefetch" href="/bufan-doc/assets/js/81.33f5de66.js"><link rel="prefetch" href="/bufan-doc/assets/js/82.d854fa6f.js"><link rel="prefetch" href="/bufan-doc/assets/js/83.110c252e.js"><link rel="prefetch" href="/bufan-doc/assets/js/84.473df94b.js"><link rel="prefetch" href="/bufan-doc/assets/js/85.ee0c2c9c.js"><link rel="prefetch" href="/bufan-doc/assets/js/86.ec58ee6e.js"><link rel="prefetch" href="/bufan-doc/assets/js/87.82972f59.js"><link rel="prefetch" href="/bufan-doc/assets/js/88.23a39bc5.js"><link rel="prefetch" href="/bufan-doc/assets/js/89.4be8b33a.js"><link rel="prefetch" href="/bufan-doc/assets/js/9.44c09d8c.js"><link rel="prefetch" href="/bufan-doc/assets/js/90.44c2861c.js"><link rel="prefetch" href="/bufan-doc/assets/js/91.468becad.js"><link rel="prefetch" href="/bufan-doc/assets/js/92.9e5ceb34.js"><link rel="prefetch" href="/bufan-doc/assets/js/93.9032fb68.js"><link rel="prefetch" href="/bufan-doc/assets/js/94.d7e6c360.js"><link rel="prefetch" href="/bufan-doc/assets/js/95.0fa635fb.js"><link rel="prefetch" href="/bufan-doc/assets/js/96.c7a82be8.js"><link rel="prefetch" href="/bufan-doc/assets/js/97.bf5ce894.js"><link rel="prefetch" href="/bufan-doc/assets/js/98.9d46ee61.js"><link rel="prefetch" href="/bufan-doc/assets/js/99.40ccc798.js"><link rel="prefetch" href="/bufan-doc/assets/js/vendors~notification.8531c786.js">
    <link rel="stylesheet" href="/bufan-doc/assets/css/0.styles.4fc22246.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container" data-v-36ae5a00><header class="navbar" data-v-36ae5a00><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/bufan-doc/" class="home-link router-link-active"><!----> <span class="site-name">不凡学院前端100天</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/bufan-doc/learn/" class="nav-link router-link-active">学习教程</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">配套资料</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/bufan-doc/learn/soft/" class="nav-link">前端工具</a></li><li class="dropdown-item"><!----> <a href="/bufan-doc/interview/" class="nav-link">面试之道</a></li></ul></div></div><div class="nav-item"><a href="http://www.bufanui.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  不凡官网
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/nevermo2013/dingpq" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask" data-v-36ae5a00></div> <aside class="sidebar" data-v-36ae5a00><nav class="nav-links"><div class="nav-item"><a href="/bufan-doc/learn/" class="nav-link router-link-active">学习教程</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">配套资料</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/bufan-doc/learn/soft/" class="nav-link">前端工具</a></li><li class="dropdown-item"><!----> <a href="/bufan-doc/interview/" class="nav-link">面试之道</a></li></ul></div></div><div class="nav-item"><a href="http://www.bufanui.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  不凡官网
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/nevermo2013/dingpq" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav> <a href="http://www.bufanui.com" target="_blank" class="ads ads-top" data-v-36ae5a00><img src="/bufan-doc/assets/img/bf.b6eae9c3.jpg" alt="" class="ads-img" data-v-36ae5a00></a> <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>起步</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/bufan-doc/learn/" class="sidebar-link">web 前端介绍</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>HTML和CSS基础</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/bufan-doc/learn/html-and-css/01-网页初识.html" class="sidebar-link">网页初识</a></li><li><a href="/bufan-doc/learn/html-and-css/02-HTML初识.html" class="sidebar-link">HTML 初识</a></li><li><a href="/bufan-doc/learn/html-and-css/03-HTML常用标签.html" class="sidebar-link">HTML 常用标签</a></li><li><a href="/bufan-doc/learn/html-and-css/04-CSS初识.html" class="sidebar-link">CSS 初识</a></li><li><a href="/bufan-doc/learn/html-and-css/05-CSS盒子模型.html" class="sidebar-link">CSS 盒子模型</a></li><li><a href="/bufan-doc/learn/html-and-css/06-CSS常用布局.html" class="sidebar-link">CSS 常用布局</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>JavaScript基础语法</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/bufan-doc/learn/javascript/01-JavaScript初识.html" class="sidebar-link">JavaScript 初识</a></li><li><a href="/bufan-doc/learn/javascript/02-变量和数据类型.html" class="sidebar-link">变量和数据类型</a></li><li><a href="/bufan-doc/learn/javascript/03-数据类型转换.html" class="sidebar-link">数据类型转换</a></li><li><a href="/bufan-doc/learn/javascript/04-常用运算符.html" class="sidebar-link">常用运算符</a></li><li><a href="/bufan-doc/learn/javascript/05-Date和Math对象.html" class="sidebar-link">Date 和 Math 对象</a></li><li><a href="/bufan-doc/learn/javascript/06-流程控制语句.html" class="sidebar-link">流程控制语句</a></li><li><a href="/bufan-doc/learn/javascript/07-数组初识.html" class="sidebar-link">数组初识</a></li><li><a href="/bufan-doc/learn/javascript/08-函数初识.html" class="sidebar-link">函数初识</a></li><li><a href="/bufan-doc/learn/javascript/09-排序和递归算法.html" class="sidebar-link">排序和递归</a></li><li><a href="/bufan-doc/learn/javascript/10-对象初识.html" class="sidebar-link">对象初识</a></li><li><a href="/bufan-doc/learn/javascript/11-数组和字符串常用方法.html" class="sidebar-link">数组和字符串常用方法</a></li><li><a href="/bufan-doc/learn/javascript/12-垃圾回收机制.html" class="sidebar-link">垃圾回收机制</a></li><li><a href="/bufan-doc/learn/javascript/13-代码风格和压缩.html" class="sidebar-link">代码风格和压缩</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>DOM和BOM</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/bufan-doc/learn/dom/" class="sidebar-link">DOM</a></li><li><a href="/bufan-doc/learn/bom/" class="sidebar-link">BOM</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>jQuery</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/bufan-doc/learn/jquery/" class="sidebar-link">jQuery</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>HTML5和CSS3</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/bufan-doc/learn/html5-and-css3/HTML5介绍.html" class="sidebar-link">HTML5介绍</a></li><li><a href="/bufan-doc/learn/html5-and-css3/CSS3介绍.html" class="sidebar-link">CSS3 介绍</a></li><li><a href="/bufan-doc/learn/html5-and-css3/FLEX布局介绍.html" class="sidebar-link">FLEX 布局</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>移动端开发</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/bufan-doc/learn/mobile-web/" class="sidebar-link">移动 web</a></li><li><a href="/bufan-doc/learn/mobile-web/01-移动端适配.html" class="sidebar-link">移动端适配</a></li><li><a href="/bufan-doc/learn/mobile-web/02-移动端事件.html" class="sidebar-link">移动端事件</a></li><li><a href="/bufan-doc/learn/mobile-web/03-媒体查询.html" class="sidebar-link">媒体查询</a></li><li><a href="/bufan-doc/learn/mobile-web/04-常见移动端问题.html" class="sidebar-link">常见的移动端问题</a></li><li><a href="/bufan-doc/learn/mobile-web/05-补充.html" class="sidebar-link">扩充知识</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Node.js与AJAX</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/bufan-doc/learn/node-and-ajax/AJAX.html" class="sidebar-link">AJAX</a></li><li><a href="/bufan-doc/learn/node-and-ajax/node.html" class="sidebar-link">Node.js</a></li><li><a href="/bufan-doc/learn/node-and-ajax/Sass介绍.html" class="sidebar-link">Sass</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>ES6</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/bufan-doc/learn/es6/" class="sidebar-link">ES6 简介</a></li><li><a href="/bufan-doc/learn/es6/01-let和const.html" class="sidebar-link">let 和 const</a></li><li><a href="/bufan-doc/learn/es6/02-箭头函数.html" class="sidebar-link">箭头函数</a></li><li><a href="/bufan-doc/learn/es6/03-函数默认值.html" class="sidebar-link">函数默认值</a></li><li><a href="/bufan-doc/learn/es6/04-模板字符串.html" class="sidebar-link">字符串模板</a></li><li><a href="/bufan-doc/learn/es6/05-解构赋值.html" class="sidebar-link">变量解构赋值</a></li><li><a href="/bufan-doc/learn/es6/06-数组的扩展.html" class="sidebar-link">数组的扩展</a></li><li><a href="/bufan-doc/learn/es6/07-Set和Map数据结构.html" class="sidebar-link">Set 和 Map 数据结构</a></li><li><a href="/bufan-doc/learn/es6/08-对象的扩展.html" class="sidebar-link">对象的扩展</a></li><li><a href="/bufan-doc/learn/es6/09-symbol.html" class="sidebar-link">Symbol</a></li><li><a href="/bufan-doc/learn/es6/10-Iterator(遍历器).html" class="sidebar-link">Iterator（遍历器）</a></li><li><a href="/bufan-doc/learn/es6/11-class.html" class="sidebar-link">class</a></li><li><a href="/bufan-doc/learn/es6/12-Promise.html" class="sidebar-link">Promise</a></li><li><a href="/bufan-doc/learn/es6/13-async、await.html" class="sidebar-link">async await</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>JavaScript进阶</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/bufan-doc/learn/javascript-advance/面向对象.html" class="active sidebar-link">面向对象</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/bufan-doc/learn/javascript-advance/面向对象.html#数据类型的分类和判断" class="sidebar-link">数据类型的分类和判断</a></li><li class="sidebar-sub-header"><a href="/bufan-doc/learn/javascript-advance/面向对象.html#对象的理解和使用" class="sidebar-link">对象的理解和使用</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/bufan-doc/learn/javascript-advance/面向对象.html#克隆对象" class="sidebar-link">克隆对象</a></li></ul></li><li class="sidebar-sub-header"><a href="/bufan-doc/learn/javascript-advance/面向对象.html#函数的理解和使用" class="sidebar-link">函数的理解和使用</a></li><li class="sidebar-sub-header"><a href="/bufan-doc/learn/javascript-advance/面向对象.html#上下文对象创建和初始化" class="sidebar-link">上下文对象创建和初始化</a></li><li class="sidebar-sub-header"><a href="/bufan-doc/learn/javascript-advance/面向对象.html#闭包" class="sidebar-link">闭包</a></li><li class="sidebar-sub-header"><a href="/bufan-doc/learn/javascript-advance/面向对象.html#描述对象属性的特性的属性" class="sidebar-link">描述对象属性的特性的属性</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/bufan-doc/learn/javascript-advance/面向对象.html#_1-数据属性" class="sidebar-link">1. 数据属性</a></li><li class="sidebar-sub-header"><a href="/bufan-doc/learn/javascript-advance/面向对象.html#_2-访问器属性" class="sidebar-link">2. 访问器属性</a></li><li class="sidebar-sub-header"><a href="/bufan-doc/learn/javascript-advance/面向对象.html#_3-defineproperty" class="sidebar-link">3. defineProperty</a></li><li class="sidebar-sub-header"><a href="/bufan-doc/learn/javascript-advance/面向对象.html#_4-defineproperties" class="sidebar-link">4. defineProperties</a></li><li class="sidebar-sub-header"><a href="/bufan-doc/learn/javascript-advance/面向对象.html#_5-getownpropertynames" class="sidebar-link">5.  getOwnPropertyNames</a></li></ul></li><li class="sidebar-sub-header"><a href="/bufan-doc/learn/javascript-advance/面向对象.html#原型与原型链" class="sidebar-link">原型与原型链</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/bufan-doc/learn/javascript-advance/面向对象.html#一、prototype" class="sidebar-link">一、Prototype</a></li><li class="sidebar-sub-header"><a href="/bufan-doc/learn/javascript-advance/面向对象.html#二、constructor" class="sidebar-link">二、constructor</a></li><li class="sidebar-sub-header"><a href="/bufan-doc/learn/javascript-advance/面向对象.html#三、-proto" class="sidebar-link">三、__proto__</a></li><li class="sidebar-sub-header"><a href="/bufan-doc/learn/javascript-advance/面向对象.html#四、prototype与-proto-的关系" class="sidebar-link">四、Prototype与__proto__的关系</a></li><li class="sidebar-sub-header"><a href="/bufan-doc/learn/javascript-advance/面向对象.html#五、关于原型对象的方法" class="sidebar-link">五、关于原型对象的方法</a></li></ul></li><li class="sidebar-sub-header"><a href="/bufan-doc/learn/javascript-advance/面向对象.html#创建对象" class="sidebar-link">创建对象</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/bufan-doc/learn/javascript-advance/面向对象.html#_1-原始模式创建对象" class="sidebar-link">1. 原始模式创建对象</a></li><li class="sidebar-sub-header"><a href="/bufan-doc/learn/javascript-advance/面向对象.html#_2-原始模式的改进" class="sidebar-link">2. 原始模式的改进</a></li><li class="sidebar-sub-header"><a href="/bufan-doc/learn/javascript-advance/面向对象.html#_3-构造函数模式" class="sidebar-link">3. 构造函数模式</a></li><li class="sidebar-sub-header"><a href="/bufan-doc/learn/javascript-advance/面向对象.html#_4-原型模式" class="sidebar-link">4. 原型模式</a></li><li class="sidebar-sub-header"><a href="/bufan-doc/learn/javascript-advance/面向对象.html#_5-组合使用构造函数模式和原型模式" class="sidebar-link">5. 组合使用构造函数模式和原型模式</a></li><li class="sidebar-sub-header"><a href="/bufan-doc/learn/javascript-advance/面向对象.html#_6-动态原型模式" class="sidebar-link">6. 动态原型模式</a></li></ul></li><li class="sidebar-sub-header"><a href="/bufan-doc/learn/javascript-advance/面向对象.html#对象继承" class="sidebar-link">对象继承</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/bufan-doc/learn/javascript-advance/面向对象.html#call-和-apply" class="sidebar-link">Call 和 apply</a></li><li class="sidebar-sub-header"><a href="/bufan-doc/learn/javascript-advance/面向对象.html#对象继承-2" class="sidebar-link">对象继承</a></li></ul></li></ul></li><li><a href="/bufan-doc/learn/javascript-advance/正则表达式.html" class="sidebar-link">正则表达式</a></li><li><a href="/bufan-doc/learn/canvas/" class="sidebar-link">canvas</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Vue</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/bufan-doc/learn/vue/" class="sidebar-link">vue 简介</a></li><li><a href="/bufan-doc/learn/vue/01-vue入门.html" class="sidebar-link">vue</a></li><li><a href="/bufan-doc/learn/vue/02-计算属性和侦听器.html" class="sidebar-link">计算属性和侦听器</a></li><li><a href="/bufan-doc/learn/vue/03-Class与Style绑定.html" class="sidebar-link">Class 与 Style 绑定</a></li><li><a href="/bufan-doc/learn/vue/04-事件处理.html" class="sidebar-link">事件处理</a></li><li><a href="/bufan-doc/learn/vue/05-组件基础.html" class="sidebar-link">组件</a></li><li><a href="/bufan-doc/learn/vue/06-生命周期.html" class="sidebar-link">生命周期</a></li><li><a href="/bufan-doc/learn/vue/07-插槽.html" class="sidebar-link">插槽</a></li><li><a href="/bufan-doc/learn/vue/08-动态组件.html" class="sidebar-link">动态组件</a></li><li><a href="/bufan-doc/learn/vue/09-处理边界情况.html" class="sidebar-link">处理边界情况</a></li><li><a href="/bufan-doc/learn/vue/10-过渡和动画.html" class="sidebar-link">过渡效果动画</a></li><li><a href="/bufan-doc/learn/vue/11-可复用性和组合.html" class="sidebar-link">Vue 的可复用性与组合</a></li><li><a href="/bufan-doc/learn/vue/12-vue-cli.html" class="sidebar-link">Vue CLI</a></li><li><a href="/bufan-doc/learn/vue/13-vue-router.html" class="sidebar-link">Vue Router</a></li><li><a href="/bufan-doc/learn/vue/14-vuex入门.html" class="sidebar-link">vuex 入门</a></li><li><a href="/bufan-doc/learn/vue/15-vuex高级.html" class="sidebar-link">vuex 进阶</a></li><li><a href="/bufan-doc/learn/vue/16-axios.html" class="sidebar-link">axios</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>微信小程序开发</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/bufan-doc/learn/wx-lite/" class="sidebar-link">微信小程序</a></li><li><a href="/bufan-doc/learn/wx-lite/01-小程序使用.html" class="sidebar-link">小程序的使用</a></li><li><a href="/bufan-doc/learn/wx-lite/02-小程序的生命周期.html" class="sidebar-link">生命周期</a></li><li><a href="/bufan-doc/learn/wx-lite/03-小程序事件处理.html" class="sidebar-link">小程序的事件</a></li><li><a href="/bufan-doc/learn/wx-lite/04-自定义组件.html" class="sidebar-link">自定义组件</a></li><li><a href="/bufan-doc/learn/wx-lite/05-图片操作.html" class="sidebar-link">图片操作</a></li><li><a href="/bufan-doc/learn/wx-lite/06-网络请求.html" class="sidebar-link">网络请求</a></li><li><a href="/bufan-doc/learn/wx-lite/07-微信本地存储.html" class="sidebar-link">微信本地存储</a></li><li><a href="/bufan-doc/learn/wx-lite/08-页面通信.html" class="sidebar-link">页面通讯</a></li><li><a href="/bufan-doc/learn/wx-lite/09-小程序鉴权.html" class="sidebar-link">微信获取用户信息和微信登陆</a></li><li><a href="/bufan-doc/learn/wx-lite/10-弹窗.html" class="sidebar-link">微信的弹窗</a></li><li><a href="/bufan-doc/learn/wx-lite/11-补充知识.html" class="sidebar-link">其他的小知识</a></li><li><a href="/bufan-doc/learn/wx-lite/12-注意事项.html" class="sidebar-link">注意事项</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>uni-app开发</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/bufan-doc/learn/uni/" class="sidebar-link">uni-app</a></li><li><a href="/bufan-doc/learn/uni/uniApp注意事项.html" class="sidebar-link">uni-app 注意事项</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>实战练习</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/bufan-doc/learn/just-coding/" class="sidebar-link">码吧</a></li></ul></section></li></ul> </aside> <main class="page" data-v-36ae5a00> <div class="theme-default-content content__default"><h1 id="面向对象"><a href="#面向对象" class="header-anchor">#</a> 面向对象</h1> <h2 id="数据类型的分类和判断"><a href="#数据类型的分类和判断" class="header-anchor">#</a> 数据类型的分类和判断</h2> <p><font color="#254EDB">基本数据类型：</font></p> <ul><li>Number（Infinity、NaN 、任意数值） ----- typeof</li> <li>Boolean  （true、false）----- typeof</li> <li>String   任意字符串 ----- typeof</li> <li>Null ---------  ===</li> <li>undefined --- typeof/===</li></ul> <ul><li>特点：存储在栈中，一个值对应一个变量</li></ul> <p><font color="#254EDB">引用类型值：</font></p> <ul><li>Object ----- typeof/instanceof</li> <li>Array ------ instanceof</li> <li>Function ---- typeof</li></ul> <ul><li>特点：所有引用类型值都是对象，所有对象都是function；存储在堆，一个变量对应一个指向堆地址的指针</li></ul> <p><font color="yellowbrown">instanceof 用来判断对象的类型</font></p> <h2 id="对象的理解和使用"><a href="#对象的理解和使用" class="header-anchor">#</a> 对象的理解和使用</h2> <p><font color="#254EDB">什么是对象：</font></p> <p>ECMA-262 把对象定义为：“无序属性的集合，其属性可以包含基本值、对象或者函数。”</p> <p>对象的每个属性或方法都有一个名字，而每个名字都映射到一个值。即 ECMAScript 的对象是一组键值对，其中值可以是数据或函数。</p> <p><font color="#254EDB">属性组成：</font></p> <ul><li>属性名 : 字符串(标识)</li> <li>属性值 : 任意类型</li></ul> <p><font color="#254EDB">属性的分类：</font></p> <ul><li>一般 : 属性值不是function  描述对象的状态</li> <li>方法 : 属性值为function  描述对象的行为</li></ul> <p><font color="#254EDB">特别的对象：</font></p> <ul><li>数组: 属性名是0,1,2,3之类的索引</li> <li>函数: 可以执行的</li> <li>JSON: 对象的字符串表示，用来传输数据</li></ul> <p><font color="#254EDB">如何操作内部属性：</font></p> <ul><li>.属性名</li> <li>[ '属性名' ] : 属性名有特殊字符/属性名是一个变量</li></ul> <p><font color="#254EDB">查看某属性是否在对象中：</font></p> <p>对象的一个显著的特点就是可以访问任何属性，如果这个属性名没有值也不会有错误，访问一个不存在的属性会返回 undefined。它提供一种普遍的方法去检查属性是否存在 —— 获得值来与 undefined 比较：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> user <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token function">alert</span><span class="token punctuation">(</span> user<span class="token punctuation">.</span>noSuchProperty <span class="token operator">===</span> <span class="token keyword">undefined</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true 意思是没有这个属性</span>
</code></pre></div><p>一般情况检验属性值是否 == undefined即可，但是也存在属性值就是undefined情况</p> <p>使用操作符 <code>&quot;in&quot;</code> 来检查是否属性存在**</p> <p>语法：<code>&quot;key&quot; in object</code>；需要注意 <code>in</code> 的左边必须是属性名。通常是一个字符串，如果不用字符串，那就是一个字符串变量。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> user <span class="token operator">=</span> <span class="token punctuation">{</span> age<span class="token punctuation">:</span> <span class="token number">30</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> key <span class="token operator">=</span> <span class="token string">&quot;age&quot;</span><span class="token punctuation">;</span>
<span class="token function">alert</span><span class="token punctuation">(</span> key <span class="token keyword">in</span> user <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true，获取键的名字和检查这个键的属性</span>
</code></pre></div><p><font color="#254EDB">删除对象的属性：</font></p> <p>delete 用于删除对象的属性</p> <p>用法：delete Object.attribute 删除对象的属性</p> <h3 id="克隆对象"><a href="#克隆对象" class="header-anchor">#</a> 克隆对象</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 声明一个对象</span>
<span class="token keyword">var</span> user <span class="token operator">=</span> <span class="token punctuation">{</span>
	name<span class="token punctuation">:</span> <span class="token string">&quot;李白&quot;</span><span class="token punctuation">,</span>
	age<span class="token punctuation">:</span> <span class="token number">29</span><span class="token punctuation">,</span>
	hobbies<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;唱歌&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;吟诗&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;旅游&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
	<span class="token function-variable function">sayName</span><span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token function">alert</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><font color="#2EB529">简单克隆（浅克隆 ）</font></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 创建一个新的对象,简单类型值不会改变,引用对象值会跟着改变</span>
<span class="token keyword">function</span> <span class="token function">clone</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
   	<span class="token keyword">var</span> newObj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token keyword">in</span> obj<span class="token punctuation">)</span><span class="token punctuation">{</span>
        newObj<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> obj<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> newObj<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> obj1 <span class="token operator">=</span> user<span class="token punctuation">;</span>  <span class="token comment">// 指向同一个地址,一个改变,另一个跟着改变</span>
<span class="token keyword">let</span> obj1 <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token operator">...</span>user <span class="token punctuation">}</span> <span class="token comment">// 创建一个新的对象,简单类型值不会改变,引用对象值会跟着改变</span>
<span class="token keyword">let</span> obj1 <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token constant">JOSN</span><span class="token punctuation">.</span><span class="token function">stringigy</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 无法拷贝函数</span>
<span class="token comment">/* 使用Object.assign 来拷贝对象
Object.assign(dest[, src1, src2, src3...])
	参数 dest 和 src1, ..., srcN（可以有很多个）是对象。
	这个方法复制了 src1, ..., srcN 的所有对象到 dest。换句话说，从第二个参数开始，所有对象的属性都复制给了第一个参数对象，然后返回 dest
	如果接收的对象已经有了同样属性名的属性，前面的会被覆盖
*/</span>
<span class="token keyword">let</span> obj1 <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 创建一个新的对象,简单类型值不会改变,引用对象值会跟着改变</span>
</code></pre></div><p><font color="#2EB529">深度克隆</font></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 为了解决上面的的问题，我们在复制的时候应该检查 `user[key]` 的每一个值，如果是一个对象，我们再复制一遍这个对象，可以利用 递归思想</span>
<span class="token keyword">function</span> <span class="token function">deepClone</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span>obj <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> obj <span class="token operator">!==</span> <span class="token string">'object'</span><span class="token punctuation">)</span> <span class="token keyword">return</span> obj<span class="token punctuation">;</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span>obj <span class="token keyword">instanceof</span> <span class="token class-name">RegExp</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span>obj <span class="token keyword">instanceof</span> <span class="token class-name">Date</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> newObj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> key <span class="token keyword">in</span> obj<span class="token punctuation">)</span><span class="token punctuation">{</span>
    newObj<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">deepClone</span><span class="token punctuation">(</span>obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> newObj<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> user1 <span class="token operator">=</span> <span class="token function">deepClone</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
user<span class="token punctuation">.</span>hobbies<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">&quot;drink&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>user1<span class="token punctuation">.</span>hobbies<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="函数的理解和使用"><a href="#函数的理解和使用" class="header-anchor">#</a> 函数的理解和使用</h2> <p><font color="#254EDB">什么是函数：</font></p> <ul><li><p>用来实现特定功能的, n条语句的封装体</p></li> <li><p>使用函数有什么好处?</p> <ul><li>提高复用性</li> <li>便于阅读交流</li></ul></li></ul> <p><font color="#254EDB">立即执行函数：</font></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 1. 函数表达式的立即执行</span>
<span class="token keyword">var</span> <span class="token function-variable function">fn</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;函数表达式的立即执行&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 2. 声明函数的立即执行</span>
<span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;立即执行&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;立即执行&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// 3. 函数表达式使用两个括号时</span>
<span class="token keyword">var</span> fn <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;函数表达式的立即执行&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> fn <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;函数表达式的立即执行&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p><font color="#254EDB">递归函数：</font></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 找规律 n! = n * (n-1)!</span>
<span class="token keyword">function</span> <span class="token function">jc</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>n <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
	<span class="token keyword">return</span> n <span class="token operator">*</span> <span class="token function">jc</span><span class="token punctuation">(</span>n<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><font color="#254EDB">函数的参数：</font></p> <ul><li><p>简单类型值作为形参</p></li> <li><p>引用类型值作为形参</p></li> <li><p>arguments 的使用</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span>b</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span>arguments<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>a <span class="token operator">===</span> arguments<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>		<span class="token comment">// 1 1 true</span>
	a <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arguments<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">// 4</span>
    arguments<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">6</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 6</span>
<span class="token punctuation">}</span>
<span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 函数的形参就是 arguments 数组中对应位置的值 比如 a === arguments[0] ====&gt; true</span>
<span class="token comment">// 形参的变化反映在arguments中，类似镜子内外的映射</span>
<span class="token comment">// arguments.callee 相当于函数本身</span>
</code></pre></div></li></ul> <p><font color="#254EDB">回调函数：</font></p> <p>常用场景: 定时器的回调函数/ajax的回调函数/其它需要异步处理数据的情景</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">// 模拟请求 3s后拿到数据</span>
    <span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
    <span class="token comment">// 使用A页面的回调函数处理数据</span>
    <span class="token function">fn</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 使用B页面的回调函数处理数据</span>
    <span class="token function">gn</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token number">3000</span><span class="token punctuation">)</span>
<span class="token comment">// A.html</span>
<span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'处理3s后的数据a==&gt;'</span><span class="token punctuation">,</span> n<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// B.html</span>
<span class="token keyword">function</span> <span class="token function">gn</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'处理3s后的数据a==&gt;'</span><span class="token punctuation">,</span> n<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="上下文对象创建和初始化"><a href="#上下文对象创建和初始化" class="header-anchor">#</a> 上下文对象创建和初始化</h2> <ul><li>全局:
<ul><li>在全局代码执行前最先创建一个全局上下文对象(window)</li> <li>收集一些全局变量/函数, 并初始化</li> <li>将这些变量设置为上下文对象的属性</li></ul></li> <li>函数:
<ul><li>在调用函数时, 在执行函数体之前先创建一个函数上下文对象</li> <li>收集一些局部变量,/函数 并初始化</li> <li>将这些变量设置为上下文对象的属性</li></ul></li> <li>声明提升
<ul><li>变量提升: 在变量定义语句之前, 就可以访问到这个变量(undefined)</li> <li>函数提升: 在函数定义语句之前, 就执行该函数</li> <li>如果一个变量和函数同名，函数声明优先于变量声明</li></ul></li></ul> <p>练习:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> foo <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>foo<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> foo <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">alert</span><span class="token punctuation">(</span>foo<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ?</span>
<span class="token punctuation">}</span>
<span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">b</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    a <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token keyword">function</span> <span class="token function">a</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token function">b</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">alert</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// ?</span>
</code></pre></div><p><font color="orangered">严格模式：</font></p> <p>‘use strict’</p> <p>为了规范 js 的语言类型，推出了严格模式，严格模式下未经声明的值不可使用。</p> <h2 id="闭包"><a href="#闭包" class="header-anchor">#</a> 闭包</h2> <ul><li><p>理解:</p> <ul><li>MDN 上面这么说**：**闭包是一种特殊的对象。它由两部分构成：函数，以及创建该函数的环境。环境由闭包创建时在作用域中的任何局部变量组成。</li> <li>当嵌套的内部函数引用了外部函数的变量时就产生了闭包</li> <li><font color="#3366FF">闭包的本质就是：指有权访问另一个函数作用域中的变量的函数</font></li></ul></li> <li><p>作用:</p> <ul><li>延长局部变量的生命周期</li> <li>让函数外部能操作内部的局部变量</li></ul></li> <li><p>写一个闭包</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">fn1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
  <span class="token keyword">function</span> <span class="token function">fn2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    a<span class="token operator">++</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> fn2<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> f <span class="token operator">=</span> <span class="token function">fn1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p><font color="#FF342D">闭包的作用域链包含着它自己的作用域，以及包含它的函数的作用域和全局作用域</font></p></li> <li><p>闭包应用:</p> <ul><li>回调函数</li> <li>模块化编码: 封装一些数据以及操作数据的函数, 向外暴露一些行为</li> <li>循环遍历加监听</li></ul></li> <li><p>缺点:</p> <ul><li><p>变量占用内存的时间可能会过长</p></li> <li><p>可能导致内存泄露</p></li> <li><p>解决:</p> <p>及时释放 : f = null; // 让内部函数对象成为垃圾对象</p></li></ul></li></ul> <p><strong><font color="red">内存泄露与内存溢出</font></strong></p> <ul><li>内存泄露
<ul><li>定义: 不再需要的内存对象, 因为某种原因不能成为垃圾对象而一直不能被回收(占用内存)</li> <li>例如: 意外的全局变量, 定时器, 闭包...</li> <li>问题: 导致可用内存减小</li> <li>解决: 及时释放内存</li></ul></li> <li>内存溢出
<ul><li>定义: 申请/需要的空间超过了剩余的最大空间, 程序就会抛出'内存溢出的错误</li> <li>例如: 不断创建对象/数组(大)</li> <li>问题: 运行出错, 程序停止</li> <li>解决: 减小申请内存, 及时释放内存</li></ul></li> <li>关系
<ul><li>内存泄露如果不断累积, 就有可能导致内存溢出的错误</li></ul></li></ul> <p><strong>闭包的题</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">makeCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">let</span> count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">return</span> count <span class="token operator">++</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> count1 <span class="token operator">=</span> <span class="token function">makeCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> count2 <span class="token operator">=</span> <span class="token function">makeCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">count1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// </span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">count1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">count2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">//</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">fun</span><span class="token punctuation">(</span><span class="token parameter">n<span class="token punctuation">,</span>o</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>o<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">fun</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">m</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token function">fun</span><span class="token punctuation">(</span>m<span class="token punctuation">,</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token function">fun</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// ?</span>
a<span class="token punctuation">.</span><span class="token function">fun</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// ?        </span>
a<span class="token punctuation">.</span><span class="token function">fun</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// ?</span>
a<span class="token punctuation">.</span><span class="token function">fun</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// ?</span>

<span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token function">fun</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fun</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fun</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fun</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// ?</span>

<span class="token keyword">var</span> c <span class="token operator">=</span> <span class="token function">fun</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fun</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// ?</span>
c<span class="token punctuation">.</span><span class="token function">fun</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// ?</span>
c<span class="token punctuation">.</span><span class="token function">fun</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// ?</span>
</code></pre></div><p><strong>作业：</strong></p> <ol><li><p>编写一个像 sum(a)(b) = a+b 这样工作的 sum 函数。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// eg: sum(1)(2) = 3;   sum(5)(-1) = 4</span>

<span class="token keyword">function</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token parameter">a</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">b</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>简化 sort 按字段排序</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 有一组需要排序的对象</span>
<span class="token keyword">let</span> users <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">&quot;John&quot;</span><span class="token punctuation">,</span> age<span class="token punctuation">:</span> <span class="token number">20</span><span class="token punctuation">,</span> surname<span class="token punctuation">:</span> <span class="token string">&quot;Johnson&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">&quot;Pete&quot;</span><span class="token punctuation">,</span> age<span class="token punctuation">:</span> <span class="token number">18</span><span class="token punctuation">,</span> surname<span class="token punctuation">:</span> <span class="token string">&quot;Peterson&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">&quot;Ann&quot;</span><span class="token punctuation">,</span> age<span class="token punctuation">:</span> <span class="token number">19</span><span class="token punctuation">,</span> surname<span class="token punctuation">:</span> <span class="token string">&quot;Hathaway&quot;</span> <span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">// 通常的做法：</span>

<span class="token comment">// 通过 name (Ann, John, Pete)</span>
users<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> a<span class="token punctuation">.</span>name <span class="token operator">&gt;</span> b<span class="token punctuation">.</span>name <span class="token operator">?</span> <span class="token number">1</span> <span class="token punctuation">:</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 通过 age (Pete, Ann, John)</span>
users<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> a<span class="token punctuation">.</span>age <span class="token operator">&gt;</span> b<span class="token punctuation">.</span>age <span class="token operator">?</span> <span class="token number">1</span> <span class="token punctuation">:</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 要求简化为：</span>
users<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token function">byField</span><span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
users<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token function">byField</span><span class="token punctuation">(</span><span class="token string">'age'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">key</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span>b</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span> a<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">&gt;</span> b<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">&lt;</span> b<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token number">0</span>
        <span class="token punctuation">}</span> 
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">function</span> <span class="token function">byField</span><span class="token punctuation">(</span><span class="token parameter">key</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span>b</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> a<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">-</span> b<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ol> <h2 id="描述对象属性的特性的属性"><a href="#描述对象属性的特性的属性" class="header-anchor">#</a> 描述对象属性的特性的属性</h2> <p>到目前为止，属性对我们来说是一个简单的“键-值”对。但对象属性实际上是更复杂可变的东西。</p> <p>两种描述属性：<strong>数据属性和访问器属性</strong></p> <h3 id="_1-数据属性"><a href="#_1-数据属性" class="header-anchor">#</a> 1. 数据属性</h3> <p>数据属性包含一个数据值的位置。在这个位置可以读取和写入值。数据属性有 4 个描述其行为的特性</p> <ul><li><p>[[Configurable]] ：是否可配置标志，表示能否通过 delete 删除属性从而重新定义属性，能否修改属性的特性，或者能否把属性修改为访问器属性。</p> <p>有时它会预设在内置对象和属性中。像前面例子中那样直接在对象上定义的属性，它们的这个特性默认值为 true</p> <p>当它的值为false的时候，一个不可配置的属性不能被 <code>defineProperty</code> 删除或修改。</p></li> <li><p>[[Enumerable]] ：表示能否通过 for-in 循环返回属性。像前面例子中那样直接在对象上定义的属性，它们的这个特性默认值为 true</p></li> <li><p>[[Writable]] ：表示能否修改属性的值。像前面例子中那样直接在对象上定义的属性，它们的这个特性默认值为 true</p></li> <li><p>[[Value]] ：包含这个属性的数据值。读取属性值的时候，从这个位置读；写入属性值的时候，把新值保存在这个位置。这个特性的默认值为 undefined</p></li></ul> <p>像上面的两种方法那样直接在对象上定义属性和方法，它们的 [[Configurable]] 、 [[Enumerable]] 和 [[Writable]] 特性都被设置为 true ，而 [[Value]] 特性被设置为指定的值。可以通过 Object.defineProperty() 来定义</p> <p>属性描述符可以在各个属性的级别上工作。还有一些限制访问整个对象的方法：</p> <ul><li><p><a href="https://developer.mozilla.org/zh/docs/Web/JavaScript/Reference/Global_Objects/Object/preventExtensions" target="_blank" rel="noopener noreferrer">Object.preventExtensions(obj)<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>禁止向对象添加属性。</p></li> <li><p><a href="https://developer.mozilla.org/zh/docs/Web/JavaScript/Reference/Global_Objects/Object/seal" target="_blank" rel="noopener noreferrer">Object.seal(obj)<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>禁止添加/删除属性，为所有现有的属性设置 <code>configurable: false</code>。</p></li> <li><p><a href="https://developer.mozilla.org/zh/docs/Web/JavaScript/Reference/Global_Objects/Object/freeze" target="_blank" rel="noopener noreferrer">Object.freeze(obj)<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>禁止添加/删除/更改属性，为所有现有属性设置 <code>configurable: false, writable: false</code>。</p></li></ul> <p>还有对他们的测试：</p> <ul><li><p><a href="https://developer.mozilla.org/zh/docs/Web/JavaScript/Reference/Global_Objects/Object/isExtensible" target="_blank" rel="noopener noreferrer">Object.isExtensible(obj)<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>如果添加属性被禁止，则返回 <code>false</code>，否则返回 <code>true</code>。</p></li> <li><p><a href="https://developer.mozilla.org/zh/docs/Web/JavaScript/Reference/Global_Objects/Object/isSealed" target="_blank" rel="noopener noreferrer">Object.isSealed(obj)<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>如果禁止添加/删除属性，则返回 <code>true</code>，并且所有现有属性都具有 <code>configurable: false</code>。</p></li> <li><p><a href="https://developer.mozilla.org/zh/docs/Web/JavaScript/Reference/Global_Objects/Object/isFrozen" target="_blank" rel="noopener noreferrer">Object.isFrozen(obj)<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>如果禁止添加/删除/更改属性，并且所有当前属性都是 <code>configurable: false, writable: false</code>，则返回 <code>true</code>。</p></li></ul> <p><font color="indigo">这些方法在实践中很少使用。</font></p> <h3 id="_2-访问器属性"><a href="#_2-访问器属性" class="header-anchor">#</a> 2. 访问器属性</h3> <p>访问器属性不包含数据值；它包含一对儿 getter 和 setter 函数（不过，这两个函数都不是必需的）。在读取访问器属性时，会调用 getter 函数，这个函数负责返回有效的值；在写入访问器属性时，会调用setter 函数并传入新值，这个函数负责决定如何处理数据。</p> <ul><li>[[Get]] ：在读取属性时调用的函数。默认值为 undefined</li> <li>[[Set]] ：在写入属性时调用的函数。默认值为 undefined</li></ul> <p>在对象字面量中，它们用 <code>get</code> 和 <code>set</code> 表示：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 从外表看，访问器属性看起来像一个普通的属性。这是访问器属性的设计思想。我们不以函数的方式调用 user.fullName，我们通常读取它：getter 在幕后运行。</span>
<span class="token comment">// 这样就创建了一个“虚拟”属性。它是可读写的，但实际上并不存在。</span>

<span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token keyword">get</span> <span class="token function">propName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// getter, the code executed on getting obj.propName</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token keyword">set</span> <span class="token function">propName</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// setter, the code executed on setting obj.propName = value</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="访问器属性的描述符"><a href="#访问器属性的描述符" class="header-anchor">#</a> 访问器属性的描述符</h4> <p>访问器属性的描述符与数据属性相比是不同的。</p> <p>对于访问器属性，没有 <code>value</code> 和 <code>writable</code>，但是有 <code>get</code> 和 <code>set</code> 函数。</p> <p>所以访问器描述符有：</p> <ul><li><strong>get</strong> —— 一个没有参数的函数，在读取属性时工作，</li> <li><strong>set</strong> —— 带有一个参数的函数，当属性被设置时调用，</li> <li><strong>enumerable</strong> —— 与数据属性相同，</li> <li><strong>configurable</strong> —— 与数据属性相同。</li></ul> <p>例如，要使用 <code>defineProperty</code> 创建 <code>fullName</code> 的访问器，我们可以使用 <code>get</code> 和 <code>set</code> 来传递描述符：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> user <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token string">&quot;John&quot;</span><span class="token punctuation">,</span>
  surname<span class="token punctuation">:</span> <span class="token string">&quot;Smith&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>user<span class="token punctuation">,</span> <span class="token string">'fullName'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token keyword">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>surname<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token keyword">set</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>surname<span class="token punctuation">]</span> <span class="token operator">=</span> value<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot; &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">alert</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span>fullName<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// John Smith</span>

<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> key <span class="token keyword">in</span> user<span class="token punctuation">)</span> <span class="token function">alert</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// name, surname</span>
</code></pre></div><p><strong><font color="#f00">注意: 属性可以是“数据属性”或“访问器属性”，但不能同时属于两者。</font></strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 同时存在 get函数和 value,会报错</span>
Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">'prop'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token keyword">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token number">1</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  value<span class="token punctuation">:</span> <span class="token number">2</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_3-defineproperty"><a href="#_3-defineproperty" class="header-anchor">#</a> 3. defineProperty</h3> <p>要修改属性默认的特性，必须使用 <code>Object.defineProperty()</code> 方法。</p> <p>语法：</p> <div class="language-js extra-class"><pre class="language-js"><code>Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> propertyName<span class="token punctuation">,</span> descriptor<span class="token punctuation">)</span>
<span class="token comment">// obj，propertyName   要处理的对象和属性。</span>
<span class="token comment">// descriptor   要应用的属性描述符。</span>
</code></pre></div><p>例如：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> person <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>person<span class="token punctuation">,</span> <span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    enumerable<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 是否可枚举,默认值为 true; 如果为false,打印这个对象,是看不到name这个属性的</span>
    writable<span class="token punctuation">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>  <span class="token comment">// 是否可写，默认值 true; 如果为false的话，给name赋值，不会生效</span>
    configurable<span class="token punctuation">:</span><span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 是否可配置（是否可删除），默认值 true</span>
                       <span class="token comment">// 如果为true，delete obj.name，再打印person，则显示{}</span>
                       <span class="token comment">// 如果为false，delete obj.name，再打印person,则显示{name:Nicholas}</span>
   value<span class="token punctuation">:</span><span class="token string">'Nicholas'</span><span class="token punctuation">,</span> <span class="token comment">// name对应的值</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">alert</span><span class="token punctuation">(</span>person<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">delete</span> person<span class="token punctuation">.</span>name<span class="token punctuation">;</span>
<span class="token function">alert</span><span class="token punctuation">(</span>person<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>

Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>person<span class="token punctuation">,</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
    <span class="token function-variable function">get</span><span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">// 当读取person.name时回调用此函数,拿取返回值</span>
        <span class="token keyword">return</span> <span class="token string">'xxx'</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">set</span><span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">newValue</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">// 更改person.name的值时,回调用此函数,默认形参为我们设置的新值</span>
        person<span class="token punctuation">.</span>name <span class="token operator">=</span> newValue<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p><strong><font color="#f00">注意:</font></strong></p> <ol><li><p>使属性不可配置是一条单行道。我们不能把它改回去，因为 <code>defineProperty</code> 不适用于不可配置的属性。</p></li> <li><p>设置不可用的属性时，只在使用严格模式时才会出现错误。在非严格模式下，写入只读属性等时不会发生错误。但操作仍然不会成功。非严格模式下违反标志的行为只是默默地被忽略。</p></li></ol> <h4 id="双向绑定"><a href="#双向绑定" class="header-anchor">#</a> 双向绑定</h4> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-module</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>name<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
		
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>text/javascript<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
	<span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token keyword">var</span> ipt <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;input[v-module]&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			
	ipt<span class="token punctuation">.</span><span class="token function-variable function">oninput</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
		obj<span class="token punctuation">.</span>name <span class="token operator">=</span> ipt<span class="token punctuation">.</span>value<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span><span class="token string">'name'</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
		<span class="token keyword">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token keyword">return</span> ipt<span class="token punctuation">.</span>value
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token keyword">set</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">{</span>
			ipt<span class="token punctuation">.</span>value <span class="token operator">=</span> v<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="_4-defineproperties"><a href="#_4-defineproperties" class="header-anchor">#</a> 4. defineProperties</h3> <p>Object.defineProperties() 方法用来一次定义多个属性，这个方法接受两个对象参数： 添加或修改其属性的对象，与第一个对象中要添加或修改的属性一一对应的对象</p> <p>语法:</p> <div class="language-js extra-class"><pre class="language-js"><code>Object<span class="token punctuation">.</span><span class="token function">defineProperties</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  prop1<span class="token punctuation">:</span> descriptor1<span class="token punctuation">,</span>
  prop2<span class="token punctuation">:</span> descriptor2
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>例如:</p> <div class="language-js extra-class"><pre class="language-js"><code>Object<span class="token punctuation">.</span><span class="token function">defineProperties</span><span class="token punctuation">(</span>user<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token punctuation">{</span> value<span class="token punctuation">:</span> <span class="token string">&quot;John&quot;</span><span class="token punctuation">,</span> writable<span class="token punctuation">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  surname<span class="token punctuation">:</span> <span class="token punctuation">{</span> value<span class="token punctuation">:</span> <span class="token string">&quot;Smith&quot;</span><span class="token punctuation">,</span> writable<span class="token punctuation">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_5-getownpropertynames"><a href="#_5-getownpropertynames" class="header-anchor">#</a> 5.  getOwnPropertyNames</h3> <p>Object.getOwnPropertyNames(obj)  可以得到 obj 所有的属性，无论它是否可枚举。</p> <div class="language-js extra-class"><pre class="language-js"><code>Object<span class="token punctuation">.</span><span class="token function">getOwnPropertyNames</span><span class="token punctuation">(</span>person1<span class="token punctuation">)</span> <span class="token comment">//  [&quot;name&quot;, &quot;age&quot;, &quot;job&quot;, &quot;sayName&quot;]</span>
</code></pre></div><h2 id="原型与原型链"><a href="#原型与原型链" class="header-anchor">#</a> 原型与原型链</h2> <p>前面讲过，在 JavaScript 里，函数即对象，程序可以随意操控它们。比如，可以把函数赋值给变量，或者作为参数传递给其他函数，也可以给它们设置属性，甚至调用它们的方法。下面示例代码对「普通对象」和「函数对象」进行了区分。</p> <p>普通对象：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> o1 <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> o2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>函数对象：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">f1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> <span class="token function-variable function">f2</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> f3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Function</span><span class="token punctuation">(</span><span class="token string">'str'</span><span class="token punctuation">,</span><span class="token string">'console.log(str)'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="一、prototype"><a href="#一、prototype" class="header-anchor">#</a> 一、Prototype</h3> <p>无论什么时候，只要创建了一个新函数，js 就会根据一组特性的规则为该函数创建一个 prototype （原型）属性，这个属性是一个指针，指向函数的原型对象，这个对象的用途是包含可以由特定类型的所有实例共享的属性和方法。</p> <p><font color="agreen">凡是使用 <code>function</code> 关键字或 <code>Function</code> 构造函数创建的对象都是函数对象。而且，只有函数对象才拥有  <code>prototype</code> （原型）属性。</font></p> <p>在默认情况下，所有原型对象都会自动获得一个 constructor（构造函数）属性，这个属性包含一个指向 prototype 属性所在函数的指针。也就是说该构造函数指向我们创建的构造函数本身。
创建了自定义的构造函数之后，其原型对象默认只会取得 constructor 属性；至于其他方法，都是从 Object 继承而来的。</p> <h3 id="二、constructor"><a href="#二、constructor" class="header-anchor">#</a> 二、constructor</h3> <p>函数还有一种用法，就是把它作为构造函数使用。像 <code>Object</code> 和 <code>Array</code> 这样的原生构造函数，在运行时会自动出现在执行环境中。此外，也可以创建自定义的构造函数，从而自定义对象类型的属性和方法。如下代码所示：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">sayName</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> person1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">&quot;Stone&quot;</span><span class="token punctuation">,</span> <span class="token number">28</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> person2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">&quot;Sophie&quot;</span><span class="token punctuation">,</span> <span class="token number">29</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>你应该注意到函数名 <code>Person</code> 使用的是大写字母 <code>P</code>。<font color="#000ff0">按照惯例，构造函数始终都应该以一个大写字母开头，而非构造函数则应该以一个小写字母开头。</font>这个做法借鉴自其他面向对象语言，主要是为了区别于 JavaScript 中的其他函数；因为构造函数本身也是函数，只不过可以用来创建对象而已。</p> <h3 id="三、-proto"><a href="#三、-proto" class="header-anchor">#</a> 三、<code>__proto__</code></h3> <p><font color="blue">当调用构造函数创建一个新实例后，该实例的内部将包含一个指针（内部属性），指向构造函数的原型对象</font>。ECMA-262 第 5 版中管这个指针叫 [[Prototype]] 。虽然在脚本中没有标准的方式访问 [[Prototype]] ，但 Firefox、Safari 和 Chrome 在每个对象上都支持一个属性<code>__proto__</code>；而在其他实现中，这个属性对脚本则是完全不可见的。不过，要明确的真正重要的一点就是，这个连接存在于实例与构造函数的原型对象之间，而不是存在于实例与构造函数之间。</p> <h3 id="四、prototype与-proto-的关系"><a href="#四、prototype与-proto-的关系" class="header-anchor">#</a> 四、Prototype与<code>__proto__</code>的关系</h3> <ul><li><p>函数的prototype: 定义函数时被自动赋值, 值默认为{}, 即用为原型对象</p></li> <li><p>实例对象的<code>__proto__</code>: 在创建实例对象时被自动添加, 并赋值为构造函数的prototype值</p></li> <li><p>构造函数、原型对象、实例之间的关系如下图：</p> <img src="https://upload-images.jianshu.io/upload_images/6784887-c80a66c09cb6a582.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="构造函数、原型对象、实例之间的关系" style="zoom:50%;"></li></ul> <h3 id="五、关于原型对象的方法"><a href="#五、关于原型对象的方法" class="header-anchor">#</a> 五、关于原型对象的方法</h3> <h4 id="hasownproperty"><a href="#hasownproperty" class="header-anchor">#</a> hasOwnProperty</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// hasOwnProperty() 方法可以检测一个属性是存在于实例中，还是存在于原型中。只在给定属性存在于对象实例中时，才会返回 true 。</span>
<span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'楚留香'</span>
<span class="token punctuation">}</span>
<span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token number">24</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span><span class="token string">'age'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// false</span>
</code></pre></div><h4 id="isprototypeof"><a href="#isprototypeof" class="header-anchor">#</a> isPrototypeOf</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// isPrototypeOf 判断一个对象是否是某个实例的原型对象</span>
<span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'威震天'</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token class-name">Person</span><span class="token punctuation">.</span>prototype 
obj<span class="token punctuation">.</span><span class="token function">isPrototypeOf</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span> <span class="token comment">// true</span>
</code></pre></div><h4 id="getprototypeof"><a href="#getprototypeof" class="header-anchor">#</a> getPrototypeOf</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// getPrototypeOf 获取一个实例的原型对象</span>
<span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;威震天&quot;</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> we <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> obj <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">getPrototypeOf</span><span class="token punctuation">(</span>we<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj <span class="token operator">==</span> <span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span>
</code></pre></div><h4 id="object-keys"><a href="#object-keys" class="header-anchor">#</a> Object.keys</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 获取所有对象可枚举的key</span>
<span class="token keyword">function</span> <span class="token function">User</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token class-name">User</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>sex <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token string">'威震天'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>user1<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [&quot;name&quot;, &quot;sex&quot;]</span>
</code></pre></div><hr> <h2 id="创建对象"><a href="#创建对象" class="header-anchor">#</a> 创建对象</h2> <h3 id="_1-原始模式创建对象"><a href="#_1-原始模式创建对象" class="header-anchor">#</a> 1. 原始模式创建对象</h3> <ul><li><p>实例化Object方法</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
user<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;Jhon&quot;</span><span class="token punctuation">;</span>
user<span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>
user<span class="token punctuation">.</span><span class="token function-variable function">say</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>字面量形式</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> user<span class="token punctuation">{</span>
	name<span class="token punctuation">:</span> <span class="token string">&quot;Jhon&quot;</span><span class="token punctuation">,</span>
	age<span class="token punctuation">:</span> <span class="token number">20</span><span class="token punctuation">,</span>
	<span class="token function-variable function">say</span><span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ul> <p><strong>衍生问题：</strong></p> <p>虽然 Object 构造函数或对象字面量都可以用来创建对象，但这些方式有个明显的缺点：使用同一个接口创建很多对象，会产生大量的重复代码。为解决这个问题，人们开始使用其他方式批量创建对象</p> <h3 id="_2-原始模式的改进"><a href="#_2-原始模式的改进" class="header-anchor">#</a> 2. 原始模式的改进</h3> <p>写一个函数，然后生成实例对象，从而快速的批量创建对象。这种方式称为“工厂模式”。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">createPerson</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span>age<span class="token punctuation">,</span>job</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">var</span> o <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	o<span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
	o<span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
	o<span class="token punctuation">.</span>job <span class="token operator">=</span> job<span class="token punctuation">;</span>
	o<span class="token punctuation">.</span><span class="token function-variable function">sayName</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> o<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> person1 <span class="token operator">=</span> <span class="token function">createPerson</span><span class="token punctuation">(</span><span class="token string">&quot;Nicholas&quot;</span><span class="token punctuation">,</span> <span class="token number">29</span><span class="token punctuation">,</span> <span class="token string">&quot;Software Engineer&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> person2 <span class="token operator">=</span> <span class="token function">createPerson</span><span class="token punctuation">(</span><span class="token string">&quot;Greg&quot;</span><span class="token punctuation">,</span> <span class="token number">27</span><span class="token punctuation">,</span> <span class="token string">&quot;Doctor&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>在上例中：函数 createPerson() 能够根据接受的参数来构建一个包含所有必要信息的 Person 对象。可以无数次地调用这个函数，而每次它都会返回一个包含三个属性一个方法的对象。工厂模式虽然解决了创建多个相似对象的问题，但却没有解决对象识别的问题（即怎样知道一个对象的类型）。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 例如:我们声明一个创建 dog 的函数</span>
<span class="token keyword">function</span> <span class="token function">createDog</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span>age<span class="token punctuation">,</span>skill</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">var</span> o <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    o<span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    o<span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
    o<span class="token punctuation">.</span>skill <span class="token operator">=</span> skill<span class="token punctuation">;</span>
    <span class="token keyword">return</span> o<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> dog <span class="token operator">=</span> <span class="token function">createDog</span><span class="token punctuation">(</span><span class="token string">&quot;旺财&quot;</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">,</span><span class="token string">&quot;lookHouse&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>dog<span class="token punctuation">.</span>constructor <span class="token operator">==</span> person1<span class="token punctuation">.</span>constructor<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>dog<span class="token punctuation">.</span>__proto__ <span class="token operator">==</span> person1<span class="token punctuation">.</span>__proto__<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
<span class="token comment">// 这样我们没有办法区分创建的对象是人还是狗</span>
</code></pre></div><h3 id="_3-构造函数模式"><a href="#_3-构造函数模式" class="header-anchor">#</a> 3. 构造函数模式</h3> <p>所谓&quot;构造函数&quot;（Constructor），其实就是一个普通函数，但是内部使用了<code>this</code>变量。对构造函数使用<code>new</code>运算符，就能生成实例，并且<code>this</code>变量会绑定在实例对象上。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> job</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">// 添加实例的属性和方法,new 出来的实例都具有这些属性和方法</span>
	<span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
	<span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
	<span class="token keyword">this</span><span class="token punctuation">.</span>job <span class="token operator">=</span> job<span class="token punctuation">;</span>
	<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">sayName</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token function">alert</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
    
    <span class="token comment">// 绑定在构造函数的上的属性和方法,需要通过构造函数访问</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>Person<span class="token punctuation">.</span>total<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        Person<span class="token punctuation">.</span>total <span class="token operator">=</span> <span class="token number">0</span>
    <span class="token punctuation">}</span>
    Person<span class="token punctuation">.</span>total<span class="token operator">++</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> person1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">&quot;Nicholas&quot;</span><span class="token punctuation">,</span> <span class="token number">29</span><span class="token punctuation">,</span> <span class="token string">&quot;Software Engineer&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> person2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">&quot;Greg&quot;</span><span class="token punctuation">,</span> <span class="token number">27</span><span class="token punctuation">,</span> <span class="token string">&quot;Doctor&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">/* new 操作符的作用
(1) 创建一个新对象；
(2) 将构造函数的作用域赋给新对象（因此 this 就指向了这个新对象）；
(3) 执行构造函数中的代码（为这个新对象添加属性）；
(4) 返回新对象。
*/</span>
</code></pre></div><p><strong>跟工厂模式对比：</strong></p> <ul><li><p>没有显式地创建对象</p></li> <li><p>直接将属性和方法赋给了 this 对象</p></li> <li><p>没有 return 语句，默认返回 this</p></li> <li><p>应该注意函数名 Person 使用的是大写字母 P。按照惯例，构造函数的名字始终都应该以一个大写字母开头</p></li> <li><p>创建自定义的构造函数意味着将来可以将它的实例标识为一种特定的类型；而这正是构造函数模式胜过工厂模式的地方</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">Dog</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token keyword">var</span> person <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> dog <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>person<span class="token punctuation">.</span>constructor <span class="token operator">==</span> dog<span class="token punctuation">.</span>constructor<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
</code></pre></div></li></ul> <p><strong>存在的问题：</strong></p> <p>构造函数模式虽然好用，但也并非没有缺点。使用构造函数的主要问题，就是每个方法都要在每个实例上重新创建一遍。在前面的例子中， person1 和 person2 都有一个名为 sayName() 的方法，但那两个方法不是同一个 Function 的实例。</p> <h3 id="_4-原型模式"><a href="#_4-原型模式" class="header-anchor">#</a> 4. 原型模式</h3> <p>prototype 就是通过调用构造函数而创建的那个对象实例的原型对象。<font color="blue">使用原型对象的好处是可以让所有对象实例共享它所包含的属性和方法</font>。换句话说，不必在构造函数中定义对象实例的信息，而是可以将这些信息直接添加到原型对象中。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// 添加在构造函数的原型上的属性和方法,会被 new 出来的实例共享,但是又不会被实例的更改所影响</span>
<span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;Nicholas&quot;</span><span class="token punctuation">;</span>
<span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token number">29</span><span class="token punctuation">;</span>
<span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>job <span class="token operator">=</span> <span class="token string">&quot;Software Engineer&quot;</span><span class="token punctuation">;</span>
<span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">sayName</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token function">alert</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> person1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
person1<span class="token punctuation">.</span><span class="token function">sayName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//&quot;Nicholas&quot;</span>
<span class="token keyword">var</span> person2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

person2<span class="token punctuation">.</span><span class="token function">sayName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//&quot;Nicholas&quot;</span>
<span class="token function">alert</span><span class="token punctuation">(</span>person1<span class="token punctuation">.</span>sayName <span class="token operator">==</span> person2<span class="token punctuation">.</span>sayName<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//true</span>

</code></pre></div><p>上例已经通过原型方法增加了复用性，但是，如果我要给原型对象添加大量的属性方法时，我们不断的使用Person.prototype,xxx=xxx，这样也很繁琐。为了简化流程可以让 Person.prototype 指向一个新的对象，例如</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token class-name">Person</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token punctuation">{</span>
	name<span class="token punctuation">:</span> <span class="token string">&quot;Nicholas&quot;</span><span class="token punctuation">,</span>
	age<span class="token punctuation">:</span> <span class="token number">29</span><span class="token punctuation">,</span>
	job<span class="token punctuation">:</span> <span class="token string">&quot;Software Engineer&quot;</span><span class="token punctuation">;</span>
	<span class="token function-variable function">sayName</span><span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token function">alert</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>注意：这样会更改原型对象的constructor指针</strong></p> <p>原型对象默认是有一个指针 constructor 指向其构造函数的，如果我们把构造函数的原型对象，替换成另外一个对象，这个对象的 constructor 就不再是指向该构造函数，而是指向新对象的 constructor。</p> <div class="language-js extra-class"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Object</span>
<span class="token comment">// 解决这个问题，可以把原型对象的constructor指向到Person</span>
<span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor <span class="token operator">=</span> Person
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor<span class="token punctuation">)</span> <span class="token comment">// Person</span>
</code></pre></div><h4 id="原型模式的其它用法"><a href="#原型模式的其它用法" class="header-anchor">#</a> 原型模式的其它用法</h4> <p>原型模式的重要性不仅体现在创建自定义类型方面，就连所有原生的引用类型，都是采用这种模式创建的。所有原生引用类型（ Object 、 Array 、 String ，等等）都在其构造函数的原型上定义了方法。</p> <p>通过原生对象的原型，不仅可以取得所有默认方法的引用，而且也可以定义新方法。可以像修改自定义对象的原型一样修改原生对象的原型，因此可以随时添加方法。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token class-name">String</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">startsWith</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">text</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> msg <span class="token operator">=</span> <span class="token string">&quot;Hello world!&quot;</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>msg<span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span><span class="token string">&quot;Hello&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
</code></pre></div><p><font color="red">注意：尽管可以这样做，但我们不推荐在产品化的程序中修改原生对象的原型。</font>如果因某个实现中缺少某个方法，就在原生对象的原型中添加这个方法，那么当在另一个支持该方法的实现中运行代码时，就可能会导致命名冲突。而且，这样做也可能会意外地重写原生方法。</p> <h4 id="原型的动态性"><a href="#原型的动态性" class="header-anchor">#</a> 原型的动态性</h4> <p>由于在原型中查找值的过程是一次搜索，因此我们对原型对象所做的任何修改都能够立即从实例上反映出来，即使是先创建了实例后修改原型也照样如此。请看下面的例子。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> friend <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">sayHi</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;hi&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

friend<span class="token punctuation">.</span><span class="token function">sayHi</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// &quot;hi&quot;（没有问题！）</span>
</code></pre></div><p>尽管可以随时为原型添加属性和方法，并且修改能够立即在所有对象实例中反映出来，但如果是重写整个原型对象，那么情况就不一样了。</p> <p>上面提到：调用构造函数时会为实例添加一个指向最初原型的 <code>[[Prototype]]</code> 指针，而把原型修改为另外一个对象就等于切断了构造函数与最初原型之间的联系。请记住：实例中的指针仅指向原型，而不指向构造函数。看下面的例子。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token keyword">var</span> friend <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token class-name">Person</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token punctuation">{</span>
    constructor<span class="token punctuation">:</span> Person<span class="token punctuation">,</span>
    name <span class="token punctuation">:</span> <span class="token string">&quot;Stone&quot;</span><span class="token punctuation">,</span>
    age <span class="token punctuation">:</span> <span class="token number">28</span><span class="token punctuation">,</span>
    <span class="token function-variable function">sayName</span> <span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

friend<span class="token punctuation">.</span><span class="token function">sayName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// Uncaught TypeError: friend.sayName is not a function</span>
</code></pre></div><p>在这个例子中，我们先创建了 <code>Person</code> 的一个实例，然后又重写了其原型对象。然后在调用 <code>friend.sayName()</code> 时发生了错误，因为 <code>friend</code> 指向的是重写前的原型对象，其中并不包含以该名字命名的属性。</p> <h4 id="原型对象的问题"><a href="#原型对象的问题" class="header-anchor">#</a> 原型对象的问题</h4> <ol><li>无法传递初始化参数</li> <li>共享的本性导致对于包含的引用类型值的属性会出问题</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token class-name">Person</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token punctuation">{</span>
    constructor<span class="token punctuation">:</span> Person<span class="token punctuation">,</span>
    name<span class="token punctuation">:</span> <span class="token string">&quot;zhangsan&quot;</span><span class="token punctuation">,</span>
    frinds<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;lisi&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;wangwu&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token function-variable function">sayName</span><span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token function">alert</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> person1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> person2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
person1<span class="token punctuation">.</span>frinds<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">&quot;zhaoliu&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>person2<span class="token punctuation">.</span>frinds<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ['lisi','wangwu','zhaoliu']</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>person2<span class="token punctuation">.</span>frinds <span class="token operator">==</span> person1<span class="token punctuation">.</span>frinds<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
</code></pre></div><h3 id="_5-组合使用构造函数模式和原型模式"><a href="#_5-组合使用构造函数模式和原型模式" class="header-anchor">#</a> 5. 组合使用构造函数模式和原型模式</h3> <p>构造函数模式用于定义实例属性，而原型模式用于定义方法和共享的属性。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
	<span class="token keyword">this</span><span class="token punctuation">.</span>hobbies <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'sing'</span><span class="token punctuation">,</span><span class="token string">'dance'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token class-name">Person</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">sayName</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token function">alert</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> jhon <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">&quot;Jhon&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> jina <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">&quot;Jina&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
jhon<span class="token punctuation">.</span>hobbies<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">&quot;run&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>jhon<span class="token punctuation">.</span>hobbies<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [&quot;sing&quot;, &quot;dance&quot;, &quot;run&quot;]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>jina<span class="token punctuation">.</span>hobbies<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [&quot;sing&quot;, &quot;dance&quot;]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>jhon<span class="token punctuation">.</span>say <span class="token operator">==</span> jina<span class="token punctuation">.</span>say<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
</code></pre></div><p><font color="brown">好处：每个实例都会有自己的一份实例属性的副本，但同时又共享着对方法的引用，最大限度地节省了内存。这种混成模式还支持向构造函数传递参数；可谓是集两种模式之长。</font></p> <h3 id="_6-动态原型模式"><a href="#_6-动态原型模式" class="header-anchor">#</a> 6. 动态原型模式</h3> <p>有其他语言经验的开发人员在看到独立的构造函数和原型时，很可能会感到非常困惑。动态原型模式正是致力于解决这个问题的一个方案，它把所有信息都封装在了构造函数中，而通过在构造函数中初始化原型（仅在必要的情况下），又保持了同时使用构造函数和原型的优点。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
	<span class="token keyword">this</span><span class="token punctuation">.</span>hobbies <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'sing'</span><span class="token punctuation">,</span><span class="token string">'dance'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> <span class="token keyword">this</span><span class="token punctuation">.</span>sayName <span class="token operator">!=</span> <span class="token string">&quot;function&quot;</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">sayName</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token function">alert</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> libai <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">&quot;libai&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
libai<span class="token punctuation">.</span><span class="token function">sayName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>不必用一大堆if 语句检查每个属性和每个方法；只要检查其中一个即可。</p> <p>还可以使用 instanceof 操作符确定它的类型。</p> <p><font color="red">注意：使用动态原型模式时，不能使用对象字面量重写原型。</font></p> <hr> <h2 id="对象继承"><a href="#对象继承" class="header-anchor">#</a> 对象继承</h2> <h3 id="call-和-apply"><a href="#call-和-apply" class="header-anchor">#</a> Call 和 apply</h3> <h4 id="_1-call-方法"><a href="#_1-call-方法" class="header-anchor">#</a> 1. call 方法</h4> <p>语法：<code>func.call(thisObj,arg1,arg2,arg3...)</code></p> <p>定义：调用一个对象的一个方法，以另一个对象替换当前对象</p> <p>说明：它运行一个方法，提供的第一个参数作为 <code>this</code>，后面的作为参数。如果没有提供 thisObj 参数，那么 Global 对象被用作 thisObj</p> <p>例如：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> name <span class="token operator">=</span> <span class="token string">&quot;张三&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
    name<span class="token punctuation">:</span> <span class="token string">&quot;李白&quot;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">sayName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">sayName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 张三</span>
<span class="token function">sayName</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 李白</span>

<span class="token keyword">function</span> <span class="token function">sing</span><span class="token punctuation">(</span><span class="token parameter">lyric</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token string">'在唱：'</span><span class="token operator">+</span> lyric<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">sing</span><span class="token punctuation">(</span><span class="token string">&quot;狼烟起江山北望&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">sing</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span><span class="token string">&quot;我在遥望，月亮之上&quot;</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="_2-apply-方法"><a href="#_2-apply-方法" class="header-anchor">#</a> 2. apply 方法</h4> <p>语法：<code>func.apply(thisObj,[argArray])</code></p> <p>定义：应用某一对象的一个方法，以另一个对象替换当前对象，第二个参数是数组或类数组</p> <p>说明：如果第二个参数不是数组或类数组，那么将导致一个 typeError。如果没有提供 thisObj，那么 Global 对象将被用作 thisObj，并且无法被传递任何参数。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> name <span class="token operator">=</span> <span class="token string">&quot;张三&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span> name <span class="token punctuation">:</span> <span class="token string">&quot;李白&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">sayFriend</span><span class="token punctuation">(</span><span class="token parameter">f1<span class="token punctuation">,</span>f2</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token string">'的朋友有：'</span> <span class="token operator">+</span> f1 <span class="token operator">+</span> <span class="token string">'、'</span> <span class="token operator">+</span> f2<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">sayFriend</span><span class="token punctuation">(</span><span class="token string">&quot;李四&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;王五&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">sayFriend</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span><span class="token string">&quot;杜甫&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;白居易&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">sayFriend</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token string">'杜甫'</span><span class="token punctuation">,</span><span class="token string">&quot;白居易&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><font color="blue"><code>call</code> 和 <code>apply</code> 之间唯一的语法区别是 <code>call</code> 接受一个参数列表，而 <code>apply</code> 则接受带有一个类似数组的对象。</font></p> <p><font color="brown">但是当前可以使用 spread 运算符将数组作为参数列表传递，使用 call 模拟 apply</font></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">sayFriend</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span><span class="token operator">...</span><span class="token punctuation">[</span><span class="token string">'杜甫'</span><span class="token punctuation">,</span><span class="token string">&quot;白居易&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment">// 但是这种使用方式没有 apply 解析速度快</span>
</code></pre></div><p><font color="brown"><code>apply</code> 最重要的用途之一是将调用传递给另一个函数，如下所示：</font></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> <span class="token function-variable function">wrapper</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">anotherFunction</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> arguments<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p><font color="brown">这叫做 <strong>呼叫转移</strong>。<code>wrapper</code> 传递它获得的所有内容：上下文 <code>this</code> 和 <code>anotherFunction</code> 的参数并返回其结果。</font></p> <p>新的检验类型的方法：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> s <span class="token operator">=</span> <span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>toString<span class="token punctuation">;</span>

<span class="token function">s</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  	<span class="token comment">// &quot;[object Number]&quot;</span>
<span class="token function">s</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token string">'dsf'</span><span class="token punctuation">)</span> 	<span class="token comment">// &quot;[object String]&quot;</span>
<span class="token function">s</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>		<span class="token comment">// &quot;[object Object]&quot;</span>
<span class="token function">s</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>		<span class="token comment">// &quot;[object Array]&quot;</span>
<span class="token function">s</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>  	<span class="token comment">// &quot;[object Boolean]&quot;</span>
<span class="token function">s</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">undefined</span><span class="token punctuation">)</span><span class="token comment">// &quot;[object Undefined]&quot;</span>
<span class="token function">s</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span>	<span class="token comment">// &quot;[object Null]&quot;</span>
<span class="token function">s</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token number">NaN</span><span class="token punctuation">)</span>		<span class="token comment">// &quot;[object Number]&quot;</span>
<span class="token function">s</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token number">Infinity</span><span class="token punctuation">)</span><span class="token comment">// &quot;[object Number]&quot;</span>
<span class="token function">s</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">// &quot;[object Date]&quot;</span>
<span class="token function">s</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>Math<span class="token punctuation">)</span> 	<span class="token comment">// &quot;[object Math]&quot;</span>
<span class="token function">s</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">)</span>	<span class="token comment">// &quot;[object JSON]&quot;</span>

</code></pre></div><h3 id="对象继承-2"><a href="#对象继承-2" class="header-anchor">#</a> 对象继承</h3> <p>继承定义：继承可以使子类具有父类的各种属性和方法，而不需要再次编写相同的代码</p> <p>面向对象的继承方式有很多种，原型链继承、借用构造函数继承、组合继承、原型式继承、寄生式继承、寄生式组合继承、深拷贝继承等等。</p> <h4 id="原型链继承"><a href="#原型链继承" class="header-anchor">#</a> 原型链继承</h4> <p>利用原型链的特性，当在自身找不到时，会沿着原型链往上找。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'李白'</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>hobbies <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'吟诗'</span><span class="token punctuation">,</span><span class="token string">'旅游'</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>

<span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">sayName</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">Student</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token string">&quot;24&quot;</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> student <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>student<span class="token punctuation">.</span>age<span class="token punctuation">)</span> <span class="token comment">// '24'</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>student<span class="token punctuation">.</span>name<span class="token punctuation">)</span> <span class="token comment">// undefined</span>
student<span class="token punctuation">.</span><span class="token function">sayName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 报错</span>
</code></pre></div><p>如果想让 student 访问到 Person的原型的对象的属性和方法，可以将 Student.prototype 改写为 Person 的实例</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 改写Student.prototype指针指向</span>
<span class="token class-name">Student</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>这就是原型链继承</p> <p><strong>原型链的问题：</strong></p> <p>原型对象类似一个共享库，所有实例共享原型对象同一个属性方法，如果原型对象上有引用类型，那么会被所有实例共享，也就是某个实例更改了，则会影响其他实例，例如：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> student2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// 此时我们修改某一个实例，hobbies是原型对象上的引用类型 数组</span>
student<span class="token punctuation">.</span>hobbies<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'喝酒'</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>student<span class="token punctuation">.</span>hobbies<span class="token punctuation">)</span> <span class="token comment">// ['吟诗', '旅游', '喝酒']</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>student2<span class="token punctuation">.</span>hobbies<span class="token punctuation">)</span> <span class="token comment">// ['吟诗', '旅游', '喝酒']</span>
</code></pre></div><p>从上面可以看出，student 的 hobbies（实际就是原型对象上的 hobbies）被修改后，相关的实例student2也会受到影响。</p> <p>解决：把Person上的属性方法添加到Student上，以防都存在原型对象上，会被所有实例共享，特别是引用类型的修改，会影响所有相关实例。</p> <h4 id="借用构造函数继承"><a href="#借用构造函数继承" class="header-anchor">#</a> 借用构造函数继承</h4> <p>有时候也叫做<font color="blue">伪造对象或经典继承</font>，可以利用call来实现。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'李白'</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>hobbies <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'吟诗'</span><span class="token punctuation">,</span><span class="token string">'旅游'</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>

<span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">sayName</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">Student</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token function">Person</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span> <span class="token comment">// 利用call调用Person上的属性方法拷贝一份到Student</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token number">24</span>
<span class="token punctuation">}</span>

<span class="token class-name">Student</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">let</span> student <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> student2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>student<span class="token punctuation">.</span>age<span class="token punctuation">)</span> <span class="token comment">// 24</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>student<span class="token punctuation">.</span>name<span class="token punctuation">)</span> <span class="token comment">// '李白'</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>student<span class="token punctuation">.</span>hobbies<span class="token punctuation">)</span> <span class="token comment">// '['吟诗','旅游']'</span>
student<span class="token punctuation">.</span><span class="token function">sayName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// '李白'</span>

<span class="token comment">// 此时我们修改某一个实例，hobbies 是原型对象上的引用类型 数组</span>
student<span class="token punctuation">.</span>hobbies<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'喝酒'</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>student<span class="token punctuation">.</span>pets<span class="token punctuation">)</span> <span class="token comment">// ['吟诗', '旅游', '喝酒']</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>student2<span class="token punctuation">.</span>pets<span class="token punctuation">)</span> <span class="token comment">// ['吟诗', '旅游']</span>
</code></pre></div><p>上面在子构造函数（Student）中利用call调用父构造函数（Person）的方式，叫做借助构造函数继承</p> <p>结合上面所看，<font color="blue">使用了原型链继承和借助构造函数继承，两者结合起来使用叫组合继承</font>，关系图如下：</p> <img src="https://upload-images.jianshu.io/upload_images/6784887-fa0530042081dd48.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="1.jpg" style="zoom:67%;"> <p>那么还有个问题，当父构造函数需要接收参数时，怎么处理？</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span>hobbies</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// 父构造函数接收name，hobbies参数</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name <span class="token comment">// 赋值到this上</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>hobbies <span class="token operator">=</span> hobbies <span class="token comment">// 赋值到this上</span>
<span class="token punctuation">}</span>

<span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">sayName</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">Student</span><span class="token punctuation">(</span><span class="token parameter">age<span class="token punctuation">,</span>name<span class="token punctuation">,</span>hobbies</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// 在子构造函数中也接收参数</span>
    <span class="token function">Person</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>name<span class="token punctuation">,</span>hobbies<span class="token punctuation">)</span> <span class="token comment">// 在这里把name和hobbies传参数</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age <span class="token comment">// 赋值到this上</span>
<span class="token punctuation">}</span>

<span class="token class-name">Student</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token class-name">Student</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor <span class="token operator">=</span> Student

<span class="token keyword">let</span> student <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token number">24</span><span class="token punctuation">,</span><span class="token string">&quot;李白&quot;</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token string">&quot;吟诗&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;旅游&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> student2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token number">22</span><span class="token punctuation">,</span><span class="token string">&quot;杜甫&quot;</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token string">&quot;忧虑&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;想李白&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>student<span class="token punctuation">.</span>age<span class="token punctuation">)</span> <span class="token comment">// 24</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>student<span class="token punctuation">.</span>name<span class="token punctuation">)</span> <span class="token comment">// '李白'</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>student<span class="token punctuation">.</span>pets<span class="token punctuation">)</span> <span class="token comment">// '[&quot;吟诗&quot;,&quot;旅游&quot;]'</span>
student<span class="token punctuation">.</span><span class="token function">sayName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// '李白'</span>

student<span class="token punctuation">.</span>hobbies<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'喝酒'</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>student<span class="token punctuation">.</span>hobbies<span class="token punctuation">)</span> <span class="token comment">// '[&quot;吟诗&quot;,&quot;旅游&quot;,&quot;喝酒&quot;]'</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>student2<span class="token punctuation">.</span>hobbies<span class="token punctuation">)</span> <span class="token comment">// '[&quot;吟诗&quot;,&quot;旅游&quot;]'</span>
</code></pre></div><p>这样我们就可以在子构造函数中给父构造函数传参了，但是使用<code>Person.call(this,name,hobbies)</code>和<code>new Person()</code>实例中的属性重复了，能否在子构造函数设置原型对象的时候，只要父构造函数的原型对象属性方法呢？当然是可以的，接下来的寄生式组合继承，也是目前业界认为解决继承问题最好的方案</p> <h4 id="寄生式组合继承"><a href="#寄生式组合继承" class="header-anchor">#</a> 寄生式组合继承</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span>hobbies</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// 父构造函数接收name，hobbies参数</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name <span class="token comment">// 赋值到this上</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>hobbies <span class="token operator">=</span> hobbies <span class="token comment">// 赋值到this上</span>
<span class="token punctuation">}</span>

<span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">sayName</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">Student</span><span class="token punctuation">(</span><span class="token parameter">age<span class="token punctuation">,</span>name<span class="token punctuation">,</span>hobbies</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// 在子构造函数中也接收参数</span>
    <span class="token function">Person</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>name<span class="token punctuation">,</span>hobbies<span class="token punctuation">)</span> <span class="token comment">// 在这里把name和hobbies传参数</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age <span class="token comment">// 赋值到this上</span>
<span class="token punctuation">}</span>

<span class="token comment">// 寄生式继承</span>
<span class="token keyword">function</span> <span class="token function">Temp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment">// 声明一个空的构造函数，用于桥梁作用</span>
<span class="token class-name">Temp</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token class-name">Person</span><span class="token punctuation">.</span>prototype <span class="token comment">// 把Temp构造函数的原型对象指向Person的原型对象</span>
<span class="token keyword">let</span> temp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Temp</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 用构造函数Temp实例化一个实例temp</span>
<span class="token class-name">Student</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> temp <span class="token comment">// 把子构造函数的原型对象指向temp</span>
temp<span class="token punctuation">.</span>constructor <span class="token operator">=</span> Student <span class="token comment">// 把temp的constructor指向Student</span>

<span class="token keyword">let</span> student1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token number">24</span><span class="token punctuation">,</span><span class="token string">'李白'</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token string">'吟诗'</span><span class="token punctuation">,</span><span class="token string">'旅游'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>student1<span class="token punctuation">)</span> <span class="token comment">// Student { name: '李白', hobbies: [ '吟诗', '旅游' ], age: '24' }</span>

<span class="token keyword">let</span> student2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token number">22</span><span class="token punctuation">,</span><span class="token string">'杜甫'</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token string">'忧虑'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>student2<span class="token punctuation">)</span> <span class="token comment">// Student { name: '杜甫',hobbies: [ '忧虑' ], age: 22 }</span>
</code></pre></div><p>至此为止，我们就完成了寄生式组合继承了，主要逻辑就是用一个空的构造函数，来当做桥梁，并且把其原型对象指向父构造函数的原型对象，并且实例化一个temp，temp会沿着这个原型链，去找到父构造函数的原型对象</p> <p><img src="https://upload-images.jianshu.io/upload_images/6784887-f23c3d5ab775cbef.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="2.jpg"></p> <h4 id="原型式继承"><a href="#原型式继承" class="header-anchor">#</a> 原型式继承</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 原型式继承</span>
<span class="token keyword">function</span> <span class="token function">createObjWithObj</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// 传入一个原型对象</span>
    <span class="token keyword">function</span> <span class="token function">Temp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token class-name">Temp</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> obj
    <span class="token keyword">let</span> o <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Temp</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> o
<span class="token punctuation">}</span>

<span class="token comment">// 把Person的原型对象当做temp的原型对象</span>
<span class="token keyword">let</span> temp <span class="token operator">=</span> <span class="token function">createObjWithObj</span><span class="token punctuation">(</span><span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span>

<span class="token comment">// 也可以使用Object.create实现</span>
<span class="token comment">// 把Person的原型对象当做temp2的原型对象</span>
<span class="token keyword">let</span> temp2 <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span>
</code></pre></div><h4 id="寄生式继承"><a href="#寄生式继承" class="header-anchor">#</a> 寄生式继承</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 寄生式继承</span>
<span class="token comment">// 我们在原型式的基础上，希望给这个对象新增一些属性方法</span>
<span class="token comment">// 那么我们在原型式的基础上扩展</span>
<span class="token keyword">function</span> <span class="token function">createNewObjWithObj</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> o <span class="token operator">=</span> <span class="token function">createObjWithObj</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>
    o<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;李白&quot;</span>
    o<span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token number">28</span>
    <span class="token keyword">return</span> o
<span class="token punctuation">}</span>
</code></pre></div><h4 id="es6-的class-和-extend"><a href="#es6-的class-和-extend" class="header-anchor">#</a> ES6 的class 和 extend</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Animal</span><span class="token punctuation">{</span>
	<span class="token comment">// 构造函数</span>
	<span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">color</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>color <span class="token operator">=</span> color<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token function">move</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;moving ...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Dog</span> <span class="token keyword">extends</span> <span class="token class-name">Animal</span><span class="token punctuation">{</span>
	<span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span>color</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token comment">// 继承父类属性</span>
		<span class="token keyword">super</span><span class="token punctuation">(</span>color<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;running ...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> dog <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token string">&quot;旺财&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;yellow&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
dog<span class="token punctuation">.</span><span class="token function">move</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>dog<span class="token punctuation">.</span>color<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><font color="yellowgreen">继承暂时用不到，等用到也是1年半载之后了，所以不用可以刻意背，慢慢理解就行了。因为当前的框架都没有明显体验出继承的思想。只有以后有当架构师的，可能会用到</font></p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新: </span> <span class="time">10/9/2019, 2:56:35 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/bufan-doc/learn/es6/13-async、await.html" class="prev">
          async await
        </a></span> <span class="next"><a href="/bufan-doc/learn/javascript-advance/正则表达式.html">
          正则表达式
        </a>
        →
      </span></p></div> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/bufan-doc/assets/js/app.f4cc6427.js" defer></script><script src="/bufan-doc/assets/js/4.d60abc91.js" defer></script><script src="/bufan-doc/assets/js/3.08e48031.js" defer></script><script src="/bufan-doc/assets/js/76.4cbdb224.js" defer></script><script src="/bufan-doc/assets/js/14.618a24b7.js" defer></script>
  </body>
</html>
